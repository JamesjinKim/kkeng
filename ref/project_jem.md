# 연구개발 기획서: AI 기반 능동형 하수처리 무인 자동화 시스템 개발

## 1. 연구개발의 개요 (Project Overview)

### 1.1. 과제명
**유입수 성상 예측 기반의 AI 피드포워드(Feed-forward) 제어를 통한 하수처리 무인 자동운전 시스템 개발**

### 1.2. 핵심 개념
기존의 방류수 수질 측정 후 대응하는 '사후 처방(Feedback Control)' 방식의 한계를 극복하고, 유입 단계에서부터 수질, 온도, 유량 등을 선제적으로 감지하여 **'사전 처방(Feed-forward Control)'**을 수행하는 AI 솔루션입니다. 이를 통해 송풍기(Blower) 가동 및 미생물 반응조를 최적화하여 완전 무인 자동운전을 실현합니다.

### 1.3. 연구 배경
- **국내 하수처리 현황**: 전국 약 4,200개소의 공공하수처리시설에서 일평균 2,700만 톤 처리
- **에너지 소비**: 하수처리장은 지자체 전력 사용의 30~40% 차지
- **운영 인력 부족**: 농어촌 소규모 시설의 경우 무인화 수요 급증

---

## 2. 연구개발의 필요성 (Necessity)

### 2.1. 기존 시스템의 한계 (사후 대응의 문제점)
현재 대다수의 하수처리장은 방류 직전 단계의 센서 값에 의존하여 송풍량을 조절하거나 약품을 투입합니다. 이는 반응 속도가 느려 갑작스러운 고농도 하수 유입 시 수질 기준 초과(Compliance Risk) 위험이 크고, 불필요한 과잉 포기(Over-aeration)로 전력 낭비가 심합니다.

**구체적 문제점:**
- 생물반응조 체류시간(6~12시간) 동안 제어 지연 발생
- 운영자 경험에 의존한 수동 제어로 일관성 부족
- 계절별/시간대별 유입 변동성 대응 미흡

### 2.2. 무인화 및 운영 효율화 요구
숙련된 운영자의 경험에 의존하는 운전 방식은 인력 공백 시 리스크가 큽니다. 24시간 365일 균일한 수질 관리를 위해 데이터 기반의 AI 자동운전이 필수적입니다.

### 2.3. 에너지 절감 및 탄소중립
하수처리장 전력 소비의 약 40~50%를 차지하는 송풍기(Blower) 운영을 AI로 최적화하여 탄소 중립에 기여해야 합니다.

**에너지 절감 잠재력:**
- 국내 하수처리 전력 사용량: 연간 약 2.5 TWh
- 15% 절감 시 효과: 375 GWh/년 (약 450억 원)
- CO₂ 감축: 약 17만 톤/년

---

## 3. 연구개발 목표 (Research Goals)

### 3.1. 최종 목표
1. **유입수 기반 예측 제어 시스템 구축**: 유입수 센싱 데이터를 분석하여 처리 공정(생물반응조)을 사전에 제어하는 알고리즘 개발
2. **완전 무인 자동운전 달성**: AI 운전 모드 적용 시 운영자 개입 없는 자율 운전 구현
3. **법적 기준 100% 준수**: 「물환경보전법」 및 방류수 수질 기준 항시 만족
4. **기술 이전 가능성 확보**: 다양한 처리장 규모/공정에 적용 가능한 범용 플랫폼 개발

### 3.2. 정량적 목표 (KPI)

| 구분 | 성능지표 | 목표치 | 측정 방법 | 비고 |
|------|----------|--------|-----------|------|
| 수질 안정성 | 방류수 수질 기준 초과 횟수 | 0회/년 | TMS 실시간 모니터링 | 법적 기준 준수 |
| 에너지 효율 | 전력 소비 절감률 | 기존 대비 15% 이상 | 전력량계 비교 측정 | 송풍기 제어 최적화 |
| 예측 정확도 | 유입 부하 예측 MAPE | 10% 이하 | 실측값 vs 예측값 비교 | 6시간 선행 예측 기준 |
| 자동화 수준 | 무인 운전 지속 시간 | 72시간 이상 | 운영자 개입 기록 | 연속 운전 기준 |
| 시스템 안정성 | AI 모델 가동률 | 99% 이상 | 시스템 로그 분석 | 센서 고장 제외 |
| 경제성 | 투자 회수 기간 (ROI) | 5년 이내 | 비용-편익 분석 | CAPEX + OPEX 기준 |

### 3.3. 기술 수준 목표
- **현재 기술 수준(TRL)**: 3단계 (기초 이론 검증)
- **목표 기술 수준(TRL)**: 7단계 (현장 실증 완료)
- **최종 기술 수준(TRL)**: 9단계 (상용화)

---

## 4. 주요 연구 내용 및 기술적 접근 (Core Technology)

### 4.1. 유입수 기반 능동형 센싱 및 데이터 수집 (Sensing Layer)

#### 4.1.1. 센서 네트워크 설계

**측정 항목 및 센서 사양 (금강엔지니어링 실제 운영 사례 기반):**

| 측정 항목 | 센서 타입 | 측정 범위 | 정확도 | 설치 위치 | 샘플링 주기 | 실제 운영 검증 |
|-----------|-----------|-----------|--------|-----------|-------------|----------------|
| pH | 전극식 | 0~14 | ±0.1 | pH조정조, 반응조 | 1분 | ✓ (PLC 연동) |
| 수온 | PT100 RTD | -10~50℃ | ±0.5℃ | 유입펌프장, 폭기조 | 1분 | ✓ |
| 부유물질(SS) | 탁도계 | 0~500 mg/L | ±5% | 유입펌프장, 분리막조, 방류구 | 5분 | ✓ |
| COD | UV 흡광도 | 0~200 mg/L | ±10% | 유입펌프장 | 15분 | ○ |
| BOD | 온라인 분석기 | 0~300 mg/L | ±15% | 유입펌프장 (주 1회 보정) | 1시간 | ○ |
| NH₄-N | 이온선택전극 | 0~50 mg/L | ±5% | 유입펌프장, 반응조 | 15분 | ○ |
| DO (용존산소) | 광학식 | 0~20 ppm | ±0.2 mg/L | 분리막조 (1개 지점) | 1분 | ✓ (실제 측정) |
| 유량 | 전자식 유량계 | 0~500 m³/h | ±2% | 유입펌프장, 방류구 | 1분 | ✓ (순시/일일/적산) |
| ORP (산화환원전위) | 전극식 | -500~500 mV | ±10 mV | 반응조 | 1분 | ○ |
| 차압계 | 압력 센서 | 0~100 kPa | ±1% | 분리막조 (MBR) | 실시간 | ✓ (막 오염 감지) |

**실제 장비 사양 (금강엔지니어링 폐수처리시설):**
- **터보 브로워**: 22.0 m³/min × 4,000 mmAq × 21.7 kW (DO 제어용)
- **흡입펌프**: 기존막 0.6 kW (40A × 0.12 m³/min), 신규막 1.7 kW (50A × 0.2 m³/min)
- **유량조정조 펌프**: 80A × 0.5 m³/min × 16 mH × 5.5 kW
- **약품 투입 펌프**: PAC/폴리머/NaOH 각 1,020 cc/min × 0.2 kW (다이어프램)

**센서 유지보수 계획 (실제 운영 매뉴얼 기준):**
- **DO 센서**: 주 1회 세척 (매뉴얼 명시)
- **pH 센서**: 주 2회 실측 대조 (포터블 측정기 + 리트머스 시험지 병행)
- **터보 브로워 필터**: 주 1회 교체
- **분리막 레벨센서**: 월 2회 인양 청소 (협잡물 부착 방지)
- **차압계**: 일 1회 확인 (분리막 상태 점검)
- **예비 센서 확보**: 주요 센서 100% 백업

#### 4.1.2. 데이터 수집 및 전처리 프로토콜

**데이터 품질 관리(QA/QC):**

```
1. 이상치 탐지 (Outlier Detection)
   - 3σ 규칙: 평균 ± 3표준편차 범위 초과 값 플래그
   - IQR 방법: Q1-1.5×IQR ~ Q3+1.5×IQR 범위 외 값 검증
   - 물리적 범위 검증: pH 0~14, 수온 5~35℃ 등

2. 결측치 처리 (Missing Data Handling)
   - 5분 이하 결측: 선형 보간(Linear Interpolation)
   - 5~30분 결측: 시계열 보간(Cubic Spline)
   - 30분 이상 결측: 해당 시간대 데이터 제외, 과거 동일 요일/시간대 패턴 참조

3. 센서 드리프트 보정
   - 일일 기준선 비교 (Baseline Calibration)
   - 방류수 실측 분석값과 센서값 비교 (주 2회)
   - 자동 보정 알고리즘 적용 (Kalman Filter)

4. 데이터 동기화
   - 모든 센서 데이터를 1분 단위로 정규화
   - UTC 타임스탬프 기준 동기화
```

**데이터 저장 및 관리:**
- 실시간 데이터: SCADA 시스템 연동 (1분 단위)
- 장기 저장: 시계열 데이터베이스 (InfluxDB 또는 TimescaleDB)
- 보관 기간: 최소 3년 (법적 요구사항 준수)
- 백업: 일일 자동 백업 + 월간 외부 저장

**최소 필요 데이터량:**
- AI 학습용: 최소 1년간의 연속 데이터 (계절 변동 학습)
- 검증용: 추가 6개월 데이터
- 총 데이터 포인트: 약 500만 개 이상 (센서 10종 × 1분 주기 × 1.5년)

#### 4.1.3. 각 조 운영 및 유지관리 프로토콜 (실제 운영 매뉴얼 기반)

본 프로토콜은 금강엔지니어링 폐수처리 현장 운영 매뉴얼을 기반으로 작성되었습니다.

**각 조의 기능 및 관리 요점:**

| 순서 | 조 명칭 | 주요 역할 | 핵심 유지관리 포인트 |
|------|---------|-----------|---------------------|
| 1 | 폭기조 (Aeration Tank) | - MLSS 유지 - 유기물 호기성 산화 | - 1~4조 폭기 정상 확인 - DO 센서 주 1회 세척 - 터보 브로워 필터 주 1회 교체 - 반송펌프 압력/토출량 체크 |
| 2 | 분리막조 (Membrane Tank) | - 침지형 MBR로 고농도 MLSS 유지 - 영양염류/유기물 산화 제거 | - 차압계 일 1회 확인 - 레벨스위치 월 2회 청소 - 주간세정 주 1회 - 인라인세정 월 1회 |
| 3 | 1차 처리수조 (1st Treatment Tank) | - 수리부하량/오염부하량 균등화 - 일정시간 저류 후 이송 | - 폐수 색상/냄새 확인 - 반응조 이송 원활성 확인 |
| 4 | 반응조/pH조정조/응집조 | - PAC 응결 - NaOH 중화 - 폴리머 응집 | - 약품투입량 점검 - pH 센서 주 2회 실측 대조 - 포터블/리트머스 병행 확인 |
| 5 | 가압부상조 (DAF) | - 플록 가압부상 - 고액분리 | - 운전가동/고액분리 상태 점검 - Scum 상태 점검 - 순환수 가압펌프 압력 일 1회 확인 |
| 6 | 여과수조 (Filtrate Tank) | - 분리막 처리수 임시 저류 | - 이송펌프 A/B 토출압력 확인 - 배관 개폐 상태 확인 |
| 7 | 여액조 (Filtrate Return Tank) | - 탈수여액 임시 저류 - 반응조 재이송 | - 펌프 유량/토출압력 확인 - 배관 막힘 육안 체크 |
| 8 | 슬러지 저류조 (Sludge Storage Tank) | - 탈수 전 슬러지 보관 | - 적정 수위 유지 - MLSS 증가에 따른 인발량 조절 - 이송펌프 유량 적정 관리 |
| 9 | A/C FILTER (Activated Carbon) | - 비상시 수질 안전장치 - 활성탄 흡착/여과 | - 미가동 시 물 배수 (동파방지) - 차압 상승 시 역세 - 역세수 육안체크 |
| 10 | 방류조 (Discharge Tank) | - 최종 처리수 임시 저류 | - 이송펌프 토출압/유량 확인 - 유량계 정상작동 일 1회 확인 - 판넬/현장 유량계 일치 확인 |

**특이사항:**
- **분리막조**: 차압 증가 추세 모니터링이 AI 예측 모델의 핵심 입력 변수
- **A/C FILTER**: MBR 수질 악화 시 비상 대응용으로, AI 이상 감지 시 자동 우회 가능
- **슬러지 저류조**: 휴무일/탈수기 고장 대비 적정 수위 유지 필수

#### 4.1.4. 장비별 운전 조건 및 인터록 (전체 28개 장비)

본 절은 금강엔지니어링 실제 PLC 제어 시스템을 기반으로 작성되었습니다.

**A. 펌프류 (10종)**

| No. | 장비명 | 사양 | 운전 조건 | 인터록 |
|-----|--------|------|-----------|--------|
| 1 | 흡입펌프(A/B) 기존막 | 40A × 0.12㎥/min × 0.6kW | 분리막조 HI 수위 + 타이머 (7분 ON / 2분 OFF) | - 분리막조 LOW: 정지 - 여과수조 H: 정지 - 7분 초과: 자동정지 (막 폐쇄 방지) |
| 2 | 흡입펌프(C/D) 신규막 | 50A × 0.2㎥/min × 1.7kW | 동일 | 동일 |
| 3 | 유량조정조 펌프(A/B) | 80A × 0.5㎥/min × 5.5kW | 유량조정조 HI 수위 | - 1차처리수조 HH: 정지 - ON 시 DAF 시스템 자동 연동 |
| 4 | 1차처리수조 펌프(A/B) | 50A × 0.2㎥/min × 1.5kW | 1차처리수조 H 수위 | - 분리막조 HH: 정지 |
| 5 | 여과수조 펌프(A/B) | 80A × 0.2㎥/min × 7.5kW | 여과수조 H 수위 | - 방류조 HH: 정지 |
| 6 | 슬러지 이송펌프(A/B) | 50A × 0.2㎥/min × 1.5kW | 탈수기 판넬 자동 연동 | - 탈수기 정지 시 연동 정지 |
| 7 | 여액 이송펌프(A) | 50A × 0.1㎥/min × 1.5kW | 여액조 H 수위 | - |
| 8 | 반송펌프(A/B) | 50A × 0.2㎥/min × 1.5kW | PLC 타이머 (운전/정지 시간 설정) | - |
| 9 | 방류펌프(A/B) | 80A × 0.2㎥/min × 2.2kW | 방류조 H 수위 | - |
| 10 | 순환수 가압펌프(A/B) | 65A × 0.3㎥/min × 5.09kW | 유량조정조 펌프 연동 | - |

**공통사항**: 모든 A/B 펌프는 과전류 발생 시 자동 대치 가동

**B. 약품 투입 펌프류 (5종)**

| No. | 장비명 | 사양 | 운전 조건 | 인터록 |
|-----|--------|------|-----------|--------|
| 11 | PAC 공급 펌프(A/B) | 1,020cc/min × 0.2kW (다이어프램) | 유량조정조 펌프 연동 | - |
| 12 | 폴리머 공급 펌프(A/B) | 1,020cc/min × 0.2kW (다이어프램) | 유량조정조 펌프 연동 | - |
| 13 | 가성소다 공급 펌프(A/B) | 1,020cc/min × 0.2kW (다이어프램) | 유량조정조 펌프 ON + pH LOW 도달 | - pH HIGH: 정지 - pH조정조 교반기 정지: 연동 정지 |
| 14 | 세정약품 공급 펌프(A/B) | 1,020㎖/min × 0.2kW (다이어프램) | PLC 역세 시간 (주간/인라인) | - |
| 15 | 역세펌프 | 25A × 0.03㎥/min × 0.25kW (마그네틱) | 역세 시 적정농도 약품 이송 | - |

**C. 송풍/교반 장비류 (8종)**

| No. | 장비명 | 사양 | 운전 조건 | 특이사항 |
|-----|--------|------|-----------|----------|
| 16 | 터보 브로워(A/B) | 22.0㎥/min × 21.7kW | PLC 타이머 (자동/수동) DO 농도/유입량 기반 유량 조절 | - 주 1회 A/B 교번 운전 - 전력의 50.4% 차지 (AI 최적화 대상) |
| 17 | 반응조 교반기 | 120RPM × 3.7kW | 유량조정조 펌프 연동 | - 유량조정조 펌프 OFF 후 60초 지연 정지 |
| 18 | pH조정조 교반기 | 180RPM × 3.7kW | 유량조정조 펌프 + 가성소다 펌프 연동 | - 가성소다 펌프 OFF 시 연동 정지 |
| 19 | 응집조 교반기 | 60RPM × 3.7kW | 유량조정조 펌프 연동 | - |
| 20 | PAC탱크 교반기 | 180RPM × 2.25kW | 간헐 운전 (수동) | - |
| 21 | NaOH탱크 교반기 | 180RPM × 2.25kW | 간헐 운전 (수동) | - |
| 22 | 폴리머탱크 교반기 | 180RPM × 2.25kW | 간헐 운전 (수동) | - |
| 23 | 세정약품 공급탱크 교반기 | 180RPM × 0.75kW (1.0㎥) | PLC 역세 시간 연동 | - 역세 시 자동 ON/OFF |

**D. 기타 장비 (5종)**

| No. | 장비명 | 사양 | 기능 | 유지보수 |
|-----|--------|------|------|----------|
| 24 | DO센서 | 0~20 ppm | 분리막조 DO 측정 | 주 1회 세척 |
| 25 | pH센서 | 0~14 | pH조정조 pH 측정 | 주 2회 실측 대조 (포터블/리트머스) |
| 26 | 공기압축기(A/B) | 0.22N㎥/min × 1.5kW | 가압부상조 에어 공급 | 압력계 연동 자동운전 |
| 27 | 탈수기 시스템 | DIBP-65W, 1.5~5.0㎥/hr | 슬러지 탈수 | 탈수기 판넬 자동 조작 |
| 28 | 호이스트 | 2 TON × 1.9kW | 분리막 인양 (계외세정) | - |

**주요 인터록 요약:**

```
유량조정조 펌프 ON
  → DAF SYSTEM 자동 ON
    → SOL밸브 열림 (지연시간 X초)
    → 순환펌프 가동 (지연시간 Y초)
    → PAC/폴리머/NaOH 펌프 가동
    → 반응조/pH조정조/응집조 교반기 가동

1차처리수조 HH → 유량조정조 펌프 OFF
분리막조 HH → 1차처리수조 펌프 OFF
분리막조 HHAL → 고수위 경보 + 1차처리수조 펌프 OFF
여과수조 H → 흡입펌프 정지
방류조 HH → 여과수조 펌프 OFF
pH 센서 High → NaOH 펌프 정지
과전류 발생 → A-B 펌프 자동 대치 가동
흡입펌프 7분 초과 → 자동 정지 (분리막 폐쇄 방지)
```

**AI 제어 시스템 적용 시 변경 사항:**
1. **터보 브로워**: DO 설정값을 AI가 실시간 최적화 (현재 고정값 → 동적 조절)
2. **반송펌프**: 타이머 고정 → AI 기반 동적 스케줄링
3. **약품 투입량**: 고정 투입 → AI 예측 기반 가변 투입
4. **흡입펌프 타이머**: 고정 7분/2분 → 차압 예측 기반 동적 조절

### 4.2. AI 알고리즘 개발 (Analytics Layer)

#### 4.2.1. 예측 모델 설계

**모델 선택 기준:**

| 모델 타입 | 장점 | 단점 | 적용성 평가 |
|-----------|------|------|-------------|
| LSTM (Long Short-Term Memory) | 장기 의존성 학습 우수 | 학습 시간 오래 걸림 | ★★★★★ (채택) |
| GRU (Gated Recurrent Unit) | LSTM보다 경량 | 성능은 LSTM에 비해 약간 낮음 | ★★★★☆ (보조 모델) |
| Transformer | 병렬 처리 가능, 최신 기술 | 데이터 많이 필요 | ★★★☆☆ (장기 검토) |
| CNN-LSTM 하이브리드 | 공간/시간 특성 동시 학습 | 복잡도 높음 | ★★★★☆ (2차 모델) |

**최종 선정 모델: Bidirectional LSTM with Attention Mechanism**

#### 4.2.2. 모델 아키텍처 상세 설계

```
입력층 (Input Layer):
- 시계열 길이: 72시간 (과거 3일간 데이터)
- Feature 수: 30개 (기존 25개 + 제어 변수 5개)
  [센서 데이터 15개] + [파생 변수 7개] + [시간 변수 3개] + [제어 변수 5개]

Feature 상세:
1. 센서 직접 측정값 (15개):
   - 유입수: pH, 수온, SS, COD, BOD, NH₄-N, 유량, ORP
   - 반응조: DO (3지점), MLSS, SVI, 온도
   - 방류수: SS, COD

2. 파생 변수 (7개):
   - F/M비 (Food to Microorganism ratio)
   - 유기물 부하율 (kg BOD/m³·day)
   - 수리학적 체류시간 (HRT)
   - 슬러지 체류시간 (SRT)
   - 송풍기 가동률 (%)
   - 반송슬러지 비율
   - 누적 강우량 (6시간)

3. 시간 변수 (3개):
   - 시간대 (Hour of Day, 0~23)
   - 요일 (Day of Week, 0~6)
   - 계절 (Season, 0~3)

4. 제어 변수 (5개) - Future Control Input:
   *미래의 제어 동작에 따른 수질 변화를 예측하기 위해 입력으로 사용*
   - 터보 브로워 목표 RPM
   - PAC 투입량
   - Polymer 투입량
   - NaOH 투입량
   - 반송 펌프 유량

Feature Engineering:
- Min-Max 정규화: 각 변수를 0~1 범위로 스케일링
- 이동평균: 1시간, 6시간, 24시간 윈도우
- 변화율: 1시간 전 대비 변화량 (Δ값)

모델 구조:
Layer 1: Bidirectional LSTM (128 units) + Dropout(0.3)
Layer 2: Bidirectional LSTM (64 units) + Dropout(0.3)
Layer 3: Attention Mechanism (Self-Attention)
Layer 4: Dense (32 units, ReLU)
Layer 5: Dense (출력층)

출력층 (Output Layer):
- 예측 시간: 6시간 후
- 예측 변수 (5개):
  1. 방류수 예상 COD (mg/L)
  2. 방류수 예상 BOD (mg/L)
  3. 방류수 예상 SS (mg/L)
  4. 방류수 예상 T-N (mg/L)
  5. 최적 송풍량 (m³/min)
```

#### 4.2.3. 학습 전략 및 Cold Start 해결 방안

**Cold Start 문제 해결 (초기 데이터 부족 대응):**

신규 현장에 AI 도입 시, 초기에는 학습 데이터가 부족하여 바로 AI 제어를 적용할 수 없습니다. 이를 해결하기 위해 3단계 전략을 사용합니다.

```
Phase 1: Rule-based 제어 + 데이터 수집 (0~3개월)
- 제어 방식: 기존 PLC 로직 또는 개선된 Rule-based 알고리즘 사용
- AI 역할: Shadow Mode로 예측만 수행 (제어 개입 X)
- 데이터 확보: 3개월간 센서 데이터 및 운전 이력 축적
- 목표: 초기 학습용 데이터셋(Baseline Dataset) 구축

Phase 2: Transfer Learning (전이 학습) (3~6개월)
- 제어 방식: AI 권고 + 운영자 승인 (Human-in-the-loop)
- 모델: 유사한 규모/공정의 타 처리장 Pre-trained 모델을 가져와서
        현장 데이터(Phase 1)로 Fine-tuning
- 효과: 적은 데이터로도 80% 이상의 예측 정확도 확보 가능

Phase 3: Full AI Control (자율 운전) (6개월 이후)
- 제어 방식: AI 완전 자동 제어 (Safety Layer 보호 하에)
- 모델: 현장 데이터가 충분히 축적된 고도화 모델
- 지속 학습: 매월 최신 데이터로 모델 업데이트 (Continual Learning)
```

**Semi-supervised Learning (준지도 학습):**
실험실 분석 데이터(Ground Truth)는 주 1~2회로 매우 적은 반면, 센서 데이터는 1분 단위로 방대합니다. 이를 활용하기 위해 준지도 학습을 적용합니다.

1. **Pseudo-labeling**: 신뢰도 높은 AI 모델이 센서 데이터만 있는 구간의 수질(BOD, COD 등)을 예측하여 가상 라벨(Pseudo-label) 생성
2. **Consistency Regularization**: 원본 데이터와 노이즈를 섞은 데이터에 대해 모델이 동일한 예측을 하도록 학습
3. **휴대용 측정기 활용**: 매일 1회 휴대용 수질 측정기로 간이 측정하여 Ground Truth 보강

**데이터 분할:**
- 학습 데이터(Training): 70% (약 10개월)
- 검증 데이터(Validation): 15% (약 2개월)
- 테스트 데이터(Test): 15% (약 2개월)
- 시계열 특성 고려: 시간 순서 유지 (무작위 분할 금지)

**학습 파라미터:**
- Optimizer: Adam (learning rate: 0.001, β₁=0.9, β₂=0.999)
- Loss Function: Huber Loss (이상치에 강건)
- Batch Size: 128
- Epochs: 200 (Early Stopping 적용, patience=20)
- Regularization: L2 (λ=0.001) + Dropout (0.3)

**성능 평가 지표:**
- MAPE (Mean Absolute Percentage Error): 목표 10% 이하
- RMSE (Root Mean Squared Error)
- R² Score: 목표 0.85 이상
- 방향 정확도: 상승/하강 예측 일치율 90% 이상

**Overfitting 방지:**
1. Early Stopping: Validation Loss 20 epoch 연속 증가 시 중단
2. Dropout: 30% 비율로 뉴런 무작위 비활성화
3. Data Augmentation: Jittering, Time Warping 기법 적용
4. Cross-Validation: 시계열 교차검증 (Time Series Split)

#### 4.2.4. 시계열 및 환경 변수 학습

**계절별 특성 학습:**

| 계절 | 주요 특성 | AI 학습 전략 |
|------|-----------|--------------|
| 봄 (3~5월) | 수온 상승, 미생물 활성 증가 | 송풍량 점진적 감소 패턴 학습 |
| 여름 (6~8월) | 강우량 증가, 유량 변동 큰 | 강우 예측 데이터 연동, 급격한 부하 대응 |
| 가을 (9~11월) | 수온 하강, 안정적 처리 | 최적 운전 조건 유지 |
| 겨울 (12~2월) | 수온 5~10℃, 질산화 저하 | 체류시간 연장, 송풍량 증가 |

**시간대별 특성 학습:**
- 06:00~09:00 (아침 피크): 유입 유량 200% 증가 대비
- 18:00~21:00 (저녁 피크): 고농도 유입 대비
- 00:00~05:00 (야간): 저부하 운전 (Eco Mode)
- 주말 vs 평일: 유량 패턴 차이 학습

**돌발 상황 시나리오 학습:**
1. 급격한 강우 (1시간 30mm 이상): 과거 강우 이벤트 데이터 학습
2. 산업폐수 무단 유입: pH, COD 급격한 변화 패턴 탐지
3. 축제/행사: 지역 이벤트 캘린더 연동
4. 센서 고장: 센서 신뢰도 저하 패턴 학습

#### 4.2.5. PSO(Particle Swarm Optimization) 최적화 엔진

**PSO 알고리즘 개요:**

PSO(입자군 최적화)는 자연계 새떼나 물고기떼의 집단 행동을 모방한 메타휴리스틱 최적화 알고리즘으로, 하수처리 시스템의 **실시간 제어 파라미터 최적화**에 활용됩니다.

**PSO의 하수처리 적용 강점:**
- ✓ **빠른 수렴**: 분 단위 실시간 최적화 가능 (100개 입자 × 50세대 ≈ 1~2분)
- ✓ **다목적 최적화**: 비용-수질-안전성을 동시에 고려
- ✓ **제약조건 처리**: 법적 기준, 설비 한계를 자동으로 준수
- ✓ **미분 불필요**: 복잡한 비선형 시스템에도 적용 가능

**PSO 적용 분야:**

**1) 약품 투입 최적화**

```python
# 목적 함수 (Objective Function)
def fitness_function(particle):
    # particle = [PAC_dose, Polymer_dose, NaOH_dose, timing]

    # 1. Bi-LSTM으로 처리수질 예측
    predicted_quality = bi_lstm_model.predict(sensor_data, particle)
    quality_score = calculate_compliance(predicted_quality, target_standards)

    # 2. 약품 비용
    chemical_cost = (
        particle[0] * PAC_unit_cost +
        particle[1] * Polymer_unit_cost +
        particle[2] * NaOH_unit_cost
    )

    # 3. 에너지 비용
    energy_cost = calculate_energy(particle)

    # 최소화: 비용, 최대화: 수질 (가중합)
    return -quality_score + 0.3*chemical_cost + 0.2*energy_cost

# PSO 탐색 공간
Particle = [PAC투입량, Polymer투입량, NaOH투입량, 체류시간, 교반속도]

# 제약조건 (금강엔지니어링 실제 사양 기반)
constraints = {
    'PAC': (0, 200),        # mg/L
    'Polymer': (0, 10),     # mg/L
    'NaOH': (0, 50),        # mg/L (pH 8.5 이하 유지)
    'HRT': (20, 60),        # 분 (체류시간)
    'Agitator_RPM': (60, 180)  # RPM
}
```

**2) 펌프 운전 스케줄 최적화**

```python
# 24시간 운전 계획 최적화
Particle = [
    pump1_schedule[24],  # 각 시간대별 ON(1)/OFF(0)
    pump2_schedule[24],
    blower_speed[24],    # 터보 브로워 속도 (0~100%)
]

# 목적 함수
fitness = minimize(
    전력비용 + 피크전력_페널티
)
subject to:
    - 모든 Tank 수위 제약 만족
    - 방류수질 기준 준수 (COD ≤ 40mg/L, BOD ≤ 10mg/L, SS ≤ 10mg/L)
    - Bi-LSTM 예측 수질 > 목표치
```

**전력 피크 회피 패턴 학습:**
- 심야 전력 (23:00~09:00): 고효율 운전 (재폭기, 막 세정)
- 피크 시간대 (10:00~12:00, 13:00~17:00): 최소 운전
- 유입량 급증 예측 시: 선제적 용량 확보

**3) 막(Membrane) 운전 최적화**

현재 시스템: 고정 타이머 (7분 ON / 2분 OFF)
→ **PSO 동적 최적화:**

```python
Particle = [
    suction_time,      # 흡입 시간 (5~10분)
    rest_time,         # 휴지 시간 (1~3분)
    backwash_interval, # 역세척 주기 (시간)
    backwash_duration, # 역세척 시간 (분)
    TMP_threshold      # 막간압력차 임계값 (kPa)
]

fitness = minimize(
    막_오염도 + 에너지비용 + 막_수명_감소율
)

# 실제 운영 데이터 기반 제약조건
constraints = {
    'TMP': (0, 50),           # kPa (50kPa 초과 시 세정 필수)
    'weekly_cleaning': True,  # 주 1회 0.03% NaOCl
    'monthly_cleaning': True  # 월 1회 0.3% NaOCl 인라인 세정
}
```

**PSO 알고리즘 구현:**

```python
class WastewaterPSO:
    def __init__(self, bi_lstm_model, n_particles=100, n_iterations=50):
        self.prediction_model = bi_lstm_model
        self.n_particles = n_particles
        self.n_iterations = n_iterations

    def objective_function(self, particle, current_state):
        # Bi-LSTM으로 결과 예측
        predicted_result = self.prediction_model.predict(
            current_state,
            control_params=particle
        )

        # 다목적 최적화 (가중합)
        cost = (
            w1 * chemical_cost(particle) +
            w2 * energy_cost(particle) +
            w3 * penalty_water_quality(predicted_result) +
            w4 * penalty_constraints(particle)
        )

        return cost

    def optimize(self):
        # PSO 메인 루프
        # - 입자 초기화
        # - 속도 및 위치 업데이트
        # - 전역 최적해(gbest) 및 개인 최적해(pbest) 추적
        # - 수렴 조건 확인
        pass
```

**PSO 수행 주기:**
- **정상 운전**: 30분마다 최적화 실행
- **부하 급변 감지 시**: 즉시 최적화 (5분 내)
- **긴급 상황**: Rule-based 제어로 전환 (PSO 우회)

#### 4.2.6. Bi-LSTM + PSO 통합 아키텍처

**전체 시스템 구조:**

```
┌─────────────────────────────────────────────────────────────┐
│                   센서 데이터 수집 (1분 주기)                     │
│  pH, 수온, 유량, 탁도, DO, SS, COD, BOD, NH₄-N, ORP, 차압 등     │
│  + 설비 상태: 펌프 전류, 송풍기 속도, 약품 잔량, 전력 소비              │
└────────────────────┬────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────────┐
│         Bi-LSTM with Attention (예측 레이어) - 5분 주기         │
│  ┌───────────────────────────────────────────────────────┐  │
│  │ Multi-task Learning:                                  │  │
│  │ • 수질 예측: 1h/3h/6h 후 COD, BOD, SS, T-N, T-P          │  │
│  │ • 수위 변화 예측: 각 Tank 별 10분 후 수위                    │  │
│  │ • 이상 상황 감지: Anomaly Score (0~1)                     │  │
│  │ • 설비 고장 예보: Pump, Blower, Membrane 건강도             │  │
│  │ • Attention: 중요 시점 파악 (약품 투입, 유량 급증 등)          │  │
│  └───────────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────────┐
│              PSO 최적화 엔진 (30분 주기)                        │
│  ┌───────────────────────────────────────────────────────┐  │
│  │ 입력: Bi-LSTM 예측값 + 현재 상태 + 제약조건                  │  │
│  │ 탐색: 100개 입자 × 50세대 (약 1~2분 소요)                   │  │
│  │                                                       │  │
│  │ 최적화 대상:                                             │  │
│  │ • 펌프 ON/OFF 타이밍 (24시간 스케줄)                        │  │
│  │ • 약품 투입량 (PAC, Polymer, NaOH)                       │  │
│  │ • 터보 브로워 속도 (0~100%)                               │  │
│  │ • 막 운전 사이클 (흡입/휴지 시간)                            │  │
│  │                                                       │  │
│  │ 목적: minimize(약품비 + 전력비 + 수질위반_페널티)              │  │
│  └───────────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────────┐
│               Safety Layer (안전 검증)                        │
│  • 물리적 제약 확인 (펌프 용량, 약품 잔량 등)                        │
│  • 예측 신뢰도 확인 (Uncertainty > threshold → 보수적 제어)        │
│  • 센서 이상 감지 (결측값, 이상치 탐지)                             │
│  • 법적 기준 준수 여부 (방류수질 기준 80% 초과 시 경고)                │
└────────────────────┬────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────────────────────┐
│                  PLC 제어 명령 실행                            │
│  • 펌프 ON/OFF, 속도 조절 (Modbus TCP 통신)                     │
│  • 약품 투입 펌프 유량 조절 (0~1,020 cc/min)                     │
│  • 터보 브로워 속도 제어 (인버터 주파수 조절)                        │
│  • 밸브 개폐 제어 (SOL 밸브)                                    │
└────────────────────┬────────────────────────────────────────┘
                     ↓
              피드백 (센서 데이터 수집으로)
```

**융합 시너지 효과:**

1. **Bi-LSTM 예측 정확도 ↑ → PSO 탐색 공간 축소 → 최적화 속도 ↑**
   - 예측 모델이 6시간 후 고부하를 예측하면, PSO는 "송풍량 증가" 방향으로만 탐색
   - 탐색 공간 50% 축소 → 수렴 시간 30% 단축

2. **PSO 최적 운전 데이터 축적 → Bi-LSTM 학습 데이터 품질 ↑**
   - PSO가 발견한 최적 제어 파라미터를 새로운 학습 데이터로 활용
   - 준최적(sub-optimal) 운전 데이터를 필터링하여 모델 성능 향상

3. **Attention 메커니즘 → PSO 가중치 동적 조정**
   - Attention이 "pH 급변 시점"을 높게 평가하면, PSO는 약품 투입 최적화에 더 높은 가중치 부여

**시스템별 통합 예시:**

**[DAF System (가압부상조)]**

```python
# Step 1: Bi-LSTM 예측
유입_SS_예측 = model.predict_influent_SS(next_3hours)
최적_탁도_예측 = model.predict_DAF_performance(current_state)

# Step 2: PSO 최적화
best_params = PSO.optimize(
    variables=[
        PAC_dose,         # PAC 투입량 (0~200 mg/L)
        Polymer_dose,     # 고분자 응집제 (0~10 mg/L)
        NaOH_dose,        # 가성소다 (0~50 mg/L)
        순환펌프_속도      # 0~100%
    ],
    objective=minimize(
        0.4 * chemical_cost +
        0.3 * energy_cost +
        0.3 * penalty_turbidity
    ),
    constraints=[
        출구_탁도 < 30 NTU,
        pH: 6.5~8.5,
        유입_SS_예측 기반 부하 대응
    ]
)

# Step 3: 제어 실행
DAF_controller.set_PAC_pump(best_params.PAC_dose)
DAF_controller.set_Polymer_pump(best_params.Polymer_dose)
DAF_controller.set_circulation_pump(best_params.순환펌프_속도)
```

**[Membrane Tank (분리막조)]**

```python
# Step 1: Attention으로 막 오염 패턴 분석
attention_weights = model.get_attention_weights()
high_attention_periods = attention_weights > threshold
# → 막 오염 시작 시점 역추적 가능 (예: 18시간 전 고농도 유입)

# Step 2: TMP(막간압력차) 예측
predicted_TMP_24h = model.predict_TMP(next_24hours)

# Step 3: PSO로 세정 스케줄 최적화
IF predicted_TMP_24h.max() > 40 kPa:
    optimal_cleaning = PSO.optimize(
        variables=[세정시기, 세정시간, NaOCl농도],
        objective=minimize(
            막_오염도 + 세정비용 + 생산량_손실
        ),
        constraints=[
            TMP < 50 kPa,
            주간세정: 주 1회 0.03% NaOCl,
            월간세정: 월 1회 0.3% NaOCl
        ]
    )
    schedule_cleaning(optimal_cleaning)
```

**[터보 브로워 (에너지 최적화)]**

```python
# 터보 브로워는 전체 전력의 50.4% 차지 → AI 최적화 핵심 대상

# Step 1: DO 수요 예측 (Bi-LSTM)
predicted_DO_demand = model.predict_DO_demand(
    influent_load=predicted_BOD,
    temperature=predicted_temp,
    MLSS=current_MLSS
)

# Step 2: PSO로 송풍 스케줄 최적화
optimal_blower_schedule = PSO.optimize(
    variables=[
        blower_speed_hourly[24],  # 시간별 속도 (0~100%)
        intermittent_pattern[24]  # 간헐 포기 패턴 (ON/OFF)
    ],
    objective=minimize(
        전력비용 + 피크전력_페널티
    ),
    constraints=[
        DO_actual >= DO_target (2.0~2.5 mg/L),
        TOU_pricing 반영 (심야 vs 피크),
        predicted_DO_demand 만족
    ]
)

# 기대 효과: 전력 소비 15~20% 절감
```

### 4.3. AI 기반 무인 자동운전 제어 시스템 (Control Layer)

#### 4.3.1. 피드포워드(Feed-forward) 제어 로직

**제어 알고리즘:**

```
IF 유입 BOD 예측값 > 200 mg/L (고부하 예상):
   THEN:
   - 송풍기 RPM: 현재 대비 +25% 증가
   - 반송슬러지 비율: 50% → 75% 증가
   - 체류시간: 8시간 → 10시간 연장 (유입 밸브 조절)
   - 예비 반응조 가동 준비

ELSE IF 유입 BOD 예측값 < 80 mg/L (저부하 예상):
   THEN:
   - 에너지 절약 모드(Eco Mode) 전환
   - 송풍기 RPM: 현재 대비 -20% 감소
   - 반응조 일부 대기 모드 전환
   - 간헐 포기 운전 (Intermittent Aeration)

ELSE (정상 부하):
   - 표준 운전 모드 유지
   - DO 목표값: 2.0~2.5 mg/L

추가 제어 규칙:
- 수온 < 10℃ AND 계절=겨울: 송풍량 +15% 보정
- 강우 예측 (6시간 내 20mm 이상): 유입조 수위 사전 확보
- NH₄-N > 30 mg/L: 질산화 강화 모드 (DO 목표값 3.5 mg/L)
```

#### 4.3.2. 하이브리드 제어 (Feed-forward + Feedback)

**이중 안전장치 설계:**

```
주 제어: Feed-forward (유입수 기반 예측)
↓
6시간 선행 제어 실행
↓
보조 제어: Feedback (방류수 실측 기반)
↓
실시간 검증 및 미세 조정

검증 로직:
IF |방류수 실측 COD - 예측 COD| > 20%:
   THEN:
   - AI 모델 재보정 필요 플래그
   - Feedback 제어 가중치 일시적 증가 (70% → 50%)
   - 운영자에게 알림 발송

IF 방류수 COD > 법적 기준의 80%:
   THEN:
   - 즉시 송풍량 최대치 가동
   - 약품 투입 자동 실행 (응집제)
   - 관리자 긴급 알림 (SMS + 전화)
   - 수동 모드 전환 대기
```

#### 4.3.3. 실제 운영 기반 인터락(Interlock) 제어 로직

**금강엔지니어링 PLC 시스템 분석 기반 인터락 설계:**

```
1. 수위 기반 자동 제어 (Level Interlock)

분리막조:
- 수위 M (정상): 흡입펌프 운전
- 수위 L (저수위): 흡입펌프 정지
- 수위 HH (고수위): 1차처리수조 펌프 정지
- 수위 HHAL (초고수위): 경보 발생 + 유량조정조 펌프 정지

1차처리수조:
- 수위 H (고수위): 1차처리수조 펌프 가동
- 수위 HH (초고수위): 유량조정조 펌프 정지

여과수조:
- 수위 H (고수위): 여과수조 펌프 가동
- 수위 HH (초고수위): 흡입펌프 정지

방류조:
- 수위 H (고수위): 방류 펌프 가동

2. 가압부상조 시스템 연동 (Chemical System Interlock)

유량조정조 펌프 ON 시:
→ 자동 연동 시퀀스 (PLC 기반):
   Step 1: SOL-101 밸브 열림 (지연 시간 설정 가능)
   Step 2: 순환수 가압펌프 가동
   Step 3: PAC 약품펌프 가동
   Step 4: 반응조/PH조정조/응집조 교반기 가동
   Step 5: 폴리머 약품펌프 가동

유량조정조 펌프 OFF 시:
→ 역순 정지 시퀀스:
   Step 1: SOL-101 밸브 닫힘 (지연 시간 설정 가능)
   Step 2: 순환수 가압펌프 정지 (밸브 닫힘 후 X초)
   Step 3: VENT SV-102 밸브 열림 (압력 해제, Y초간)
   Step 4: 약품펌프 정지
   Step 5: 교반기 정지 (Z초 지연)

3. pH 제어 인터락 (pH Control Interlock)

NaOH 약품 투입 조건:
- 유량조정조 펌프 ON 상태
- pH 측정값 < LOW 설정값: NaOH 펌프 A 가동
- pH 측정값 > HIGH 설정값: NaOH 펌프 정지
- pH 조정조 교반기 정지 시: NaOH 펌프 자동 정지

경보 조건:
- pH < LLAL (하한 경보): 경보 발생
- pH > HHAL (상한 경보): 경보 발생 + 유량조정조 펌프 정지 검토

4. 과전류 보호 및 이중화 운전 (Overcurrent Protection)

모든 이중화 펌프(A/B):
- A 펌프 과전류 → 자동 정지 → B 펌프 자동 기동
- 운영자 경보 발생 (FAULT 표시)
- PLC 로그 기록

5. 분리막 보호 인터락 (MBR Protection)

차압계 기반:
- 차압 > 설정값: 주간세정 필요 알림
- 차압 >> 고설정값: 인라인세정 필요 경보

흡입펌프 타이머:
- 연속 가동 시간 > 7분: 자동 정지 (막 폐쇄 방지)
- 정지 시간: 2분 이하 유지

6. 터보 브로워 DO 제어 (Blower DO Control)

현재 운영 방식 (Feedback):
- DO 센서 측정값 기반 RPM 조절
- 설정값(SV) 대비 제어

AI 개선 방안:
- 유입 부하 예측 → 6시간 선행 RPM 설정 (Feed-forward)
- DO 실측값으로 미세 조정 (Feedback 보조)
- 과포기 방지: 야간 저부하 시 간헐 운전
```

**AI 시스템 통합 시 인터락 강화:**
```
AI 예측 신뢰도 기반 제어 모드 자동 전환:

IF AI 예측 정확도(MAPE) < 10%:
   → Feed-forward 비중 70%, Feedback 30%

ELSE IF 10% ≤ MAPE < 15%:
   → Feed-forward 비중 50%, Feedback 50%

ELSE IF MAPE ≥ 15%:
   → Feedback 전환 + AI 모델 재보정 알림

센서 고장 감지 시:
   → 이중화 센서 자동 전환
   → 고장 센서 없을 경우: Feedback 제어 + 운영자 알림
```

#### 4.3.4. 최적화 목적함수 (Multi-Objective Optimization)

**우선순위 기반 목적함수:**

```
Priority 1 (필수 제약조건):
- 방류수 COD ≤ 40 mg/L (법적 기준)
- 방류수 BOD ≤ 10 mg/L
- 방류수 SS ≤ 10 mg/L
- 방류수 T-N ≤ 20 mg/L
- 방류수 T-P ≤ 2 mg/L

Priority 2 (최적화 목표):
Minimize: α₁ × 전력비용 + α₂ × 약품비용 + α₃ × 슬러지 처리비용
Subject to: Priority 1 제약조건 만족

가중치:
α₁ = 0.7 (전력비용)
α₂ = 0.2 (약품비용)
α₃ = 0.1 (슬러지 비용)

최적화 알고리즘: Particle Swarm Optimization (PSO)
```

#### 4.3.5. 실시간 운영 Flow (통합 제어 시스템)

**AI 기반 자동운전 실시간 운영 프로세스:**

```
┌─────────────────────────────────────────────────────────┐
│  Step 1: 데이터 수집 (1분 주기)                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  센서 데이터:                                              │
│  • pH, 유량, 수위, 탁도, DO, 전류, 압력 (실시간)               │
│  • COD, BOD, NH₄-N (15분~1시간 주기)                       │
│  • TMP (막간압력차), ORP, 수온                              │
│                                                         │
│  설비 상태:                                               │
│  • 펌프 운전 상태 (ON/OFF, 전류, 진동)                       │
│  • 터보 브로워 속도, 전력 소비                                │
│  • 약품 잔량 (PAC, Polymer, NaOH, NaOCl)                  │
│  • 분리막 차압 (TMP), 세정 이력                              │
└──────────────────┬──────────────────────────────────────┘
                   ↓
┌─────────────────────────────────────────────────────────┐
│  Step 2: 데이터 전처리 및 검증                               │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  • 이상치 탐지 (Statistical Outlier Detection)             │
│  • 센서 고장 감지 (결측값, 물리적 한계 초과)                     │
│  • 데이터 보간 (Linear / Spline Interpolation)             │
│  • Feature Engineering (이동평균, 변화율 계산)               │
│  • Min-Max 정규화 (0~1 스케일링)                            │
└──────────────────┬──────────────────────────────────────┘
                   ↓
┌─────────────────────────────────────────────────────────┐
│  Step 3: Bi-LSTM 예측 (5분 주기)                           │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  입력: 최근 72시간 시계열 데이터 (25개 features)               │
│                                                         │
│  예측 출력:                                               │
│  • 1시간 후 / 3시간 후 / 6시간 후 수질 예측                    │
│    - COD, BOD, SS, T-N, T-P                             │
│  • 각 Tank 수위 변화 예측 (10분/30분/1시간 후)                 │
│  • 이상 상황 확률 (Anomaly Score: 0~1)                      │
│  • 설비 건강도 (Pump, Blower, Membrane: 0~100%)            │
│                                                          │
│  Attention 분석:                                          │
│  • 중요 시점 식별 (약품 투입, 유량 급증, pH 변화)                 │
│  • 막 오염 패턴 역추적                                       │
│  • 모델 불확실성(Uncertainty) 계산                           │
└──────────────────┬──────────────────────────────────────┘
                   ↓
┌─────────────────────────────────────────────────────────┐
│  Step 4: 상황 판단 및 제어 모드 선택                          │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  IF 긴급 상황 (Emergency):                                │
│    • 방류수질 > 법적 기준의 90%                              │
│    • 설비 중대 고장 (Pump 정지, 송풍기 과부하)                  │
│    → 비상 대응 모드 (최대 송풍, 긴급 약품 투입, 관리자 호출)        │
│                                                         │
│  ELSE IF 이상 감지 (Anomaly Detected):                    │
│    • Anomaly Score > 0.7                                │
│    • 센서 이상 또는 예측 불확실성 > threshold                  │
│    → 안전 모드 (Rule-based 제어, AI 권고만 표시)              │
│                                                         │
│  ELSE IF 정상 운전 범위 (Normal):                          │
│    • 수질 안정, 예측 신뢰도 높음                              │
│    → AI 최적화 모드 (PSO 실행)                              │
│                                                         │
│  ELSE IF 저부하 운전 (Low Load):                           │
│    • 유입 BOD < 80 mg/L, 야간 시간대                        │
│    → 에너지 절약 모드 (Eco Mode)                            │
└──────────────────┬──────────────────────────────────────┘
                   ↓
┌─────────────────────────────────────────────────────────┐
│  Step 5: PSO 최적화 실행 (30분 주기, 정상 운전 시)             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  입력:                                                   │
│  • Bi-LSTM 예측값 (6시간 후 수질)                           │
│  • 현재 시스템 상태 (설비 운전 현황)                           │
│  • 제약조건 (법적 기준, 설비 한계, 약품 잔량)                    │
│                                                         │
│  PSO 탐색 (100개 입자 × 50세대, 약 1~2분):                   │
│  • 변수: [펌프 스케줄, 송풍기 속도, 약품 투입량, 막 사이클]         │
│  • 목적함수: minimize(전력비 + 약품비 + 수질위반 페널티)          │
│                                                         │
│  출력: 최적 제어 파라미터                                     │
│  • 향후 24시간 펌프 운전 스케줄                               │
│  • 시간별 터보 브로워 속도 (심야 vs 피크 차별화)                 │
│  • PAC/Polymer/NaOH 투입량 (mg/L)                        │
│  • 분리막 흡입/휴지 시간 (분)                                │
└──────────────────┬──────────────────────────────────────┘
                   ↓
┌─────────────────────────────────────────────────────────┐
│  Step 6: Safety Layer 검증                               │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  물리적 제약 확인:                                          │
│  • 펌프 용량 초과 여부 (정격 대비 80% 이내)                     │
│  • 약품 잔량 충분 여부 (최소 3일분 확보)                        │
│  • 설비 연속 가동 시간 (과부하 방지)                           │
│                                                         │
│  예측 신뢰도 확인:                                          │
│  • IF Uncertainty > 0.3:                                │
│      → PSO 결과를 보수적으로 조정 (안전 계수 ×1.2)              │
│                                                         │
│  법적 기준 사전 확인:                                       │
│  • 예상 방류수질 > 법적 기준의 80%:                           │
│      → 송풍량 강제 증가, 운영자 경고                           │
│                                                         │
│  센서 이상 대응:                                           │
│  • 주요 센서 고장 시 → 백업 센서 또는 추정값 사용                 │
│  • 복수 센서 동시 이상 → 수동 모드 전환                         │
└──────────────────┬──────────────────────────────────────┘
                   ↓    
┌─────────────────────────────────────────────────────────┐
│  Step 7: PLC 제어 명령 전송 & 실행                          │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  Modbus TCP / OPC-UA 통신:                               │
│                                                         │
│  펌프 제어:                                               │
│  • 유량조정조 펌프 ON/OFF (수위 센서 기반)                     │
│  • 1차처리수조 펌프 가동 (스케줄 기반)                          │
│  • 흡입펌프 타이머 설정 (7분 ON → PSO 최적값 적용)               │
│                                                         │
│  송풍기 제어:                                              │
│  • 터보 브로워 속도 조절 (인버터 주파수 제어)                     │
│  • 간헐 포기 패턴 적용 (DO 목표값 2.0~2.5 mg/L 유지)            │
│                                                          │
│  약품 투입:                                                │
│  • PAC 펌프: 0~1,020 cc/min 유량 조절                       │
│  • Polymer 펌프: 농도 기반 투입량 계산                         │
│  • NaOH 펌프: pH 6.5~8.5 유지 (pH 센서 연동)                 │
│                                                         │
│  밸브 제어:                                               │
│  • SOL 밸브 개폐 (가압부상조 순환)                            │
│  • 슬러지 반송 밸브 (반송률 조절)                              │
└──────────────────┬──────────────────────────────────────┘
                   ↓
┌─────────────────────────────────────────────────────────┐
│  Step 8: 실시간 모니터링 및 피드백                            │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
│  대시보드 표시:                                            │
│  • 현재 운전 상태 (Tank별 수위, 유량, 수질)                    │
│  • AI 예측값 vs 실측값 비교 (실시간 차트)                      │
│  • 설비 가동률, 전력 소비, 약품 사용량                          │
│  • Attention 히트맵 (중요 시점 시각화)                        │
│                                                         │
│  성능 평가:                                                │
│  • 예측 정확도 계산 (MAPE, RMSE)                            │
│  • 에너지 절감률 (기준선 대비)                                │
│  • 수질 기준 준수율 (100% 목표)                              │
│                                                         │
│  온라인 학습:                                              │
│  • 실측 데이터로 모델 미세 조정 (Fine-tuning)                  │
│  • PSO 최적해를 새로운 학습 데이터로 활용                        │
│  • Drift Detection (계절 변화, 공정 변경 감지)                │
│                                                         │
│  알림 발송:                                                │
│  • 이상 상황: SMS + Email + Dashboard 경고                  │
│  • 일일 보고: 운전 요약, 에너지/약품 사용량                      │
│  • 주간 보고: 모델 성능, 비용 절감 효과                         │
└──────────────────┬──────────────────────────────────────┘
                   ↓
              피드백 (Step 1로 복귀)
```

**제어 모드별 동작 비교:**

| 구분 | 정상 AI 모드 | 안전 모드 | 비상 모드 | Eco 모드 |
|------|-------------|----------|----------|---------|
| **조건** | 수질 안정 예측 신뢰도 높음 | 이상 감지 센서 불확실성 | 수질 기준 초과 위험 설비 중대 고장 | 저부하 유입 야간 운전 |
| **Bi-LSTM** | 5분 주기 예측 | 10분 주기 예측 | 예측 중단 | 30분 주기 예측 |
| **PSO** | 30분 주기 최적화 | 최적화 중단 | 최적화 중단 | 1시간 주기 |
| **송풍기** | PSO 최적값 (60~100%) | DO 목표값 고정 (2.5 mg/L) | 최대 가동 (100%) | 간헐 포기 (40~60%) |
| **약품 투입** | PSO 최적값 (가변) | 보수적 투입 (표준값 ×1.2) | 긴급 투입 (최대량) | 최소 투입 |
| **인터록** | AI + Rule 병행 | Rule-based 우선 | Rule-based만 | Rule-based만 |
| **운영자 개입** | 감시만 | 권고 확인 요청 | 즉시 개입 필요 | 감시만 |

**시스템 전환 조건:**

```
정상 AI 모드 → 안전 모드:
  - Anomaly Score > 0.7
  - 예측 불확실성 > 0.3
  - 센서 2개 이상 이상 감지

안전 모드 → 비상 모드:
  - 방류 COD > 36 mg/L (법적 기준의 90%)
  - 터보 브로워 정지
  - 분리막 TMP > 50 kPa

비상 모드 → 안전 모드:
  - 방류수질 < 법적 기준의 70%로 회복
  - 설비 정상 가동 확인

안전 모드 → 정상 AI 모드:
  - 24시간 연속 안정 운전
  - 예측 정확도 MAPE < 10%
  - 센서 모두 정상

정상 AI 모드 ↔ Eco 모드:
  - 유입 BOD < 80 mg/L and 시간대 00:00~05:00
  - 자동 전환 (매일 반복)
```

### 4.4. 엣지 컴퓨팅 아키텍처 (Edge AI Infrastructure)

#### 4.4.1. 엣지 AI 도입 배경 및 필요성

기존 클라우드 중심 AI 시스템의 한계를 극복하고, 하수처리장 특성에 최적화된 **현장 독립형 실시간 제어 시스템**을 구축합니다.

**클라우드 방식의 한계:**
- ❌ 네트워크 지연 (100~500ms): 긴급 제어 대응 지연
- ❌ 인터넷 의존성: 통신 장애 시 시스템 전체 중단
- ❌ 높은 운영비: 월 $200~500 (클라우드 컴퓨팅 + 데이터 전송)
- ❌ 데이터 보안: 민감한 운영 데이터 외부 전송
- ❌ 농어촌 부적합: 인터넷 연결 불안정 지역 적용 어려움

**엣지 AI 방식의 장점:**
- ✅ 초저지연 (<10ms): PLC 직접 연결, 실시간 제어
- ✅ 완전 자율 운영: 인터넷 없이 독립 운전 가능
- ✅ 비용 절감: 3년 TCO 80% 감소 ($18,000 → $2,000)
- ✅ 데이터 보안: 민감 데이터 현장 내 처리
- ✅ 확장성: 소규모 시설 대량 배포 용이

#### 4.4.2. 3-Tier 하이브리드 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│           Tier 1: Edge Device (현장 - 각 처리장)               │
│  ┌────────────────────────────────────────────────────────┐ │
│  │ Raspberry Pi 5 + AI Kit (Hailo-8L NPU)                 │ │
│  │                                                        │ │
│  │ [실시간 AI 추론 및 제어]                                    │ │
│  │ • 센서 데이터 수집: 1분 주기 (Modbus TCP)                    │ │
│  │ • Bi-LSTM 예측: 5분 주기, 추론 시간 1~2초                    │ │
│  │   - Hailo-8L NPU 가속 (13 TOPS INT8)                    │ │
│  │   - 6시간 후 수질 예측 (COD, BOD, SS, T-N, T-P)            │ │
│  │ • PSO 최적화: 30분 주기, 90~120초                          │ │
│  │   - 제어 파라미터 탐색 (펌프, 송풍기, 약품)                     │ │
│  │ • Safety Layer: 6층 검증 (실시간)                          │ │
│  │ • PLC 제어 명령: 로컬 네트워크 (<10ms)                       │ │
│  │                                                        │ │
│  │ [로컬 데이터 저장]                                         │ │
│  │ • InfluxDB (시계열 DB): 최근 7일 원본 데이터                 │ │
│  │ • SQLite: 이상 이벤트 로그, 제어 이력                        │ │
│  │                                                        │ │
│  │ [하드웨어 사양]                                           │ │
│  │ • CPU: Quad-core ARM Cortex-A76 @ 2.4GHz               │ │
│  │ • NPU: Hailo-8L AI 가속기 (13 TOPS)                      │ │
│  │ • RAM: 8GB LPDDR4X                                     │ │
│  │ • Storage: 128GB microSD + 128GB SSD (옵션)             │ │
│  │ • 전력: 5~10W (UPS 백업 12시간 가능)                        │ │
│  │ • 가격: $150 (RPi $80 + AI Kit $70)                     │ │
│  └────────────────────────────────────────────────────────┘ │
└─────────────────────────┬───────────────────────────────────┘
                          ↓
            (압축된 집계 데이터만 전송: 10분 주기, 1~2 KB)
                          ↓
┌─────────────────────────────────────────────────────────────┐
│        Tier 2: Gateway / Fog Server (지역 관리 센터)           │
│  ┌────────────────────────────────────────────────────────┐ │
│  │ 소형 서버 (지역별 5~10개 처리장 집계)                       │ │
│  │                                                          │  │
│  │ [데이터 집계 및 필터링]                                    │ │
│  │ • 다수 현장 데이터 수집 (MQTT/HTTP)                        │ │
│  │ • 이상치 필터링 및 데이터 압축 (95% 감소)                  │ │
│  │ • 지역별 통합 대시보드                                     │ │
│  │ • 알림 발송 (SMS, Email)                                 │ │
│  │                                                          │  │
│  │ [모델 배포 허브]                                          │ │
│  │ • OTA(Over-The-Air) 업데이트                             │ │
│  │ • 버전 관리 및 롤백                                        │ │
│  └────────────────────────────────────────────────────────┘ │
└─────────────────────────┬───────────────────────────────────┘
                          ↓
              (요약 데이터: 시간/일/주 단위)
                          ↓
┌─────────────────────────────────────────────────────────────┐
│           Tier 3: Cloud Server (중앙 분석 센터)                │
│  ┌────────────────────────────────────────────────────────┐ │
│  │ AWS / Azure / On-premise GPU Server                     │ │
│  │                                                          │ │
│  │ [장기 분석 및 모델 재학습]                                 │ │
│  │ • 전국 데이터 통합 분석 (Big Data)                         │ │
│  │ • 대형 Bi-LSTM 모델 재학습 (주/월 단위)                   │ │
│  │   - 전국 현장 데이터로 성능 개선                           │ │
│  │   - 모델 경량화 (TensorFlow → Hailo HEF)                 │ │
│  │ • Transfer Learning (신규 시설 적용)                      │ │
│  │ • 통계 분석 및 BI 리포트                                   │ │
│  │ • 중앙 모니터링 (전국 시설 현황 통합)                       │ │
│  └────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

#### 4.4.3. 엣지 하드웨어 선정 (Industrial PC)

**산업용 엣지 컴퓨터 (IPC) 선정 근거:**
하수처리장의 가혹한 환경(습기, 먼지, 진동, 온도 변화)과 24시간 365일 무중단 가동 요구사항을 충족하기 위해, 내구성이 검증된 **Fanless Industrial PC**를 선정합니다.

**하드웨어 사양 (권장):**
- **CPU**: Intel Core i5-1135G7 (or equivalent Industrial Grade)
- **AI 가속기**: Hailo-8 M.2 Module (26 TOPS) 또는 NVIDIA Jetson Orin NX
- **RAM**: 16GB DDR4 Industrial Grade (Wide Temp)
- **Storage**: 512GB NVMe SSD (Industrial Grade, SLC/MLC)
- **OS**: Ubuntu Linux 22.04 LTS (Real-time Kernel option)
- **Interface**: 2x GbE LAN (PLC/Gateway 분리), 4x USB 3.2, RS-232/485
- **Power**: 9~36V DC Wide Range Input
- **Environment**: -20~70°C Operating Temp, Fanless Design

**하드웨어 비교:**

| 항목 | Raspberry Pi 5 + AI Kit | **Industrial PC (선정)** |
|------|------------------------|-------------------------|
| **신뢰성** | 일반 소비자용 (내구성 약함) | **산업용 등급 (내진동, 방진, 방습)** |
| **동작 온도** | 0~50°C (팬 필수, 고장 위험) | **-20~70°C (Fanless, 안정적)** |
| **AI 성능** | 13 TOPS (Hailo-8L) | **26 TOPS (Hailo-8) / 100 TOPS (Orin)** |
| **수명** | 2~3년 예상 | **7~10년 장기 공급 보증** |
| **전원** | 5V USB-C (불안정) | **9~36V DC (산업용 표준, 노이즈 강함)** |
| **가격** | $150 (저렴) | **$800~1,200 (초기 투자비 높음)** |
| **결론** | 프로토타입/교육용 적합 | **실제 현장 운전용 필수** |

**선정 이유:**
1. **내구성**: 고가의 하수처리 설비를 제어하는 핵심 장치이므로, 하드웨어 고장으로 인한 리스크(침수, 방류수 기준 초과)를 최소화해야 함.
2. **성능**: PSO 최적화와 Bi-LSTM 학습/추론을 동시에 안정적으로 수행하기 위한 충분한 컴퓨팅 파워 확보.
3. **호환성**: 산업 현장의 표준 전압(24V DC) 및 통신 규격(RS-485, Modbus) 직접 지원.

#### 4.4.4. 엣지 AI 모델 최적화

**Step 1: TensorFlow 모델 → ONNX 변환**

```python
import tensorflow as tf
import tf2onnx

# 기존 Bi-LSTM 모델 로드
model = tf.keras.models.load_model('bilstm_wastewater.h5')

# 모델 구조:
# - Input: (batch, 72, 25) - 72시간 × 25 features
# - Bi-LSTM: 128 units
# - Bi-LSTM: 64 units
# - Attention: Self-Attention
# - Dense: 32 units
# - Output: 5 units (COD, BOD, SS, T-N, T-P)

# ONNX 변환
spec = (tf.TensorSpec((1, 72, 25), tf.float32, name="input"),)
model_onnx, _ = tf2onnx.convert.from_keras(model, input_signature=spec)

with open("bilstm_wastewater.onnx", "wb") as f:
    f.write(model_onnx.SerializeToString())

print(f"Original model size: {os.path.getsize('bilstm_wastewater.h5') / 1024:.1f} KB")
print(f"ONNX model size: {os.path.getsize('bilstm_wastewater.onnx') / 1024:.1f} KB")
# Expected: ~5,000 KB → ~4,500 KB
```

**Step 2: ONNX → Hailo HEF (양자화 및 최적화)**

```bash
# Hailo Dataflow Compiler 사용

# 1. ONNX 모델 파싱
hailo parser onnx bilstm_wastewater.onnx \
    --hn bilstm_wastewater

# 2. 모델 최적화 (Calibration Dataset 사용)
hailo optimize bilstm_wastewater \
    --calib-dataset calibration_data.npy \
    --batch-size 1 \
    --hw-arch hailo8l

# 3. Hailo HEF 컴파일 (INT8 양자화)
hailo compile bilstm_wastewater \
    --hw-arch hailo8l \
    --output bilstm_optimized.hef

# 결과:
# - 모델 크기: 4,500 KB → 1,200 KB (73% 감소)
# - 추론 속도: 3초 → 1.2초 (2.5배 향상)
# - 정확도 손실: MAPE 9.2% → 9.5% (<2% 증가)
```

**Step 3: 라즈베리파이에서 추론 실행**

```python
from hailo_platform import HEF, VDevice, InferVStreams, ConfigureParams
import numpy as np
import time

# Hailo HEF 로드
hef = HEF('bilstm_optimized.hef')

# VDevice 생성 (Hailo-8L 접근)
with VDevice() as target:
    # 모델 설정
    configure_params = ConfigureParams.create_from_hef(hef, interface=HailoStreamInterface.PCIe)
    network_group = target.configure(hef, configure_params)[0]
    network_group_params = network_group.create_params()

    # 추론 파이프라인 생성
    with InferVStreams(network_group, network_group_params) as infer_pipeline:

        # 센서 데이터 준비 (72시간 × 25 features)
        def prepare_input():
            # PLC에서 수집한 센서 데이터
            sensor_data = collect_from_plc_last_72h()  # shape: (72, 25)

            # 정규화 (Min-Max Scaling)
            normalized = (sensor_data - mean) / std

            # Batch 차원 추가
            input_data = np.expand_dims(normalized, axis=0).astype(np.float32)
            return input_data

        # 추론 실행
        input_data = prepare_input()

        start_time = time.time()
        result = infer_pipeline.infer({hef.get_input_names()[0]: input_data})
        inference_time = time.time() - start_time

        # 예측 결과 추출
        output = result[hef.get_output_names()[0]][0]  # shape: (5,)

        print(f"추론 시간: {inference_time*1000:.1f} ms")
        print(f"6시간 후 예측:")
        print(f"  COD: {output[0]:.1f} mg/L")
        print(f"  BOD: {output[1]:.1f} mg/L")
        print(f"  SS: {output[2]:.1f} mg/L")
        print(f"  T-N: {output[3]:.1f} mg/L")
        print(f"  T-P: {output[4]:.2f} mg/L")

# 예상 출력:
# 추론 시간: 1,200 ms
# 6시간 후 예측:
#   COD: 28.5 mg/L
#   BOD: 7.2 mg/L
#   SS: 6.8 mg/L
#   T-N: 14.3 mg/L
#   T-P: 1.4 mg/L
```

**성능 벤치마크 (실측 예상):**

```python
# 100회 반복 추론 시간 측정
times = []
for i in range(100):
    start = time.time()
    result = infer_pipeline.infer({hef.get_input_names()[0]: input_data})
    times.append(time.time() - start)

print(f"평균 추론 시간: {np.mean(times)*1000:.1f} ms")
print(f"최소: {np.min(times)*1000:.1f} ms")
print(f"최대: {np.max(times)*1000:.1f} ms")
print(f"표준편차: {np.std(times)*1000:.1f} ms")
print(f"99 percentile: {np.percentile(times, 99)*1000:.1f} ms")

# 예상 결과:
# 평균 추론 시간: 1,200 ms (1.2초)
# 최소: 1,050 ms
# 최대: 1,450 ms
# 표준편차: 85 ms
# 99 percentile: 1,380 ms
# → 5분(300초) 주기 예측에 충분히 여유 있음
```

#### 4.4.5. 데이터 압축 및 전송 전략

**Level 1: 엣지에서만 저장 (로컬 InfluxDB)**

```python
# 원본 센서 데이터 (1분 주기)
sensor_data = {
    'timestamp': '2025-01-21T10:00:00Z',
    'pH': 7.2,
    'DO': 2.3,
    'flow': 120,
    'turbidity': 45,
    'COD': 85,
    'BOD': 150,
    'SS': 180,
    'NH4_N': 25,
    'ORP': 320,
    'TMP': 0.25,
    'temperature': 22,
    'pump1_current': 4.2,
    'pump2_current': 3.8,
    'blower_speed': 75,
    'blower_power': 16.3,
    # ... 총 25 features
}

# 로컬 저장 (7일간 보관)
influxdb_client.write_point('sensor_raw', sensor_data)
```

**Level 2: Gateway로 전송 (10분 주기, 압축)**

```python
# 10분마다 실행
def send_to_gateway():
    # 10분간 데이터 집계 (600초 / 60초 = 10개 데이터 포인트)
    aggregated = {
        'timestamp': now(),
        'site_id': 'KG_MBR_001',

        # 센서 데이터 요약 (평균, 최소, 최대만)
        'sensors': {
            'pH': {'avg': 7.2, 'min': 7.0, 'max': 7.4},
            'DO': {'avg': 2.3, 'min': 2.1, 'max': 2.5},
            'flow': {'avg': 120, 'total': 1200},  # 10분 누적
            # ... 주요 센서만 (25개 → 10개)
        },

        # AI 예측 결과 (마지막 값)
        'prediction': {
            'COD_6h': 28.5,
            'BOD_6h': 7.2,
            'SS_6h': 6.8,
            'confidence': 0.92
        },

        # 제어 파라미터
        'control': {
            'blower_speed': 75,
            'PAC_dose': 120,
            'Polymer_dose': 5,
            'pump1_runtime': 600,  # 초
            'energy_kwh': 3.6
        },

        # 이상 이벤트 (발생 시만 포함)
        'anomalies': [],  # 정상 시 빈 배열

        # KPI
        'kpi': {
            'energy_cost': 420,  # 원
            'chemical_cost': 850,
            'water_quality_score': 0.95
        }
    }

    # JSON 직렬화
    json_data = json.dumps(aggregated)

    # 압축 비율 계산
    original_size = 25 * 10 * 8  # 25 features × 10분 × 8 bytes = 2,000 bytes
    compressed_size = len(json_data)  # 약 800 bytes
    compression_ratio = (1 - compressed_size / original_size) * 100

    print(f"압축률: {compression_ratio:.1f}% (원본 {original_size}B → {compressed_size}B)")
    # 예상: 압축률: 60% (원본 2,000B → 800B)

    # MQTT 또는 HTTP POST로 Gateway 전송
    mqtt_client.publish('wastewater/site/KG_MBR_001', json_data)
```

**Level 3: Cloud로 전송 (1시간 주기 또는 이벤트 기반)**

```python
# Gateway → Cloud (1시간 주기)
def gateway_to_cloud():
    # 6개 현장 × 6회(10분×6=1시간) 데이터 집계
    hourly_summary = {
        'timestamp': now(),
        'region': 'South_Chungcheong',
        'sites': [
            {
                'site_id': 'KG_MBR_001',
                'hourly_stats': {
                    'energy_kwh': 21.6,
                    'chemical_cost': 5100,
                    'avg_effluent_COD': 28.3,
                    'anomaly_count': 0
                }
            },
            # ... 5개 현장 추가
        ],
        'region_summary': {
            'total_energy': 129.6,
            'total_cost': 30600,
            'compliance_rate': 1.0  # 100%
        }
    }

    # Cloud API 전송 (HTTPS)
    requests.post('https://cloud.example.com/api/v1/hourly', json=hourly_summary)

# 이상 이벤트 발생 시 즉시 전송
def send_anomaly_alert(event):
    alert = {
        'timestamp': now(),
        'site_id': 'KG_MBR_001',
        'severity': 'HIGH',  # LOW, MEDIUM, HIGH, CRITICAL
        'type': 'SENSOR_FAILURE',
        'message': 'DO 센서 통신 두절',
        'action_taken': 'Fallback to backup sensor'
    }

    # 즉시 전송 (Gateway + Cloud)
    mqtt_client.publish('wastewater/alert', json.dumps(alert))
```

**데이터 전송량 분석:**

| 구간 | 주기 | 원본 데이터 | 전송 데이터 | 압축률 |
|------|------|-----------|-----------|--------|
| **Edge → Gateway** | 10분 | 2,000 B | 800 B | 60% |
| **Gateway → Cloud** | 1시간 | 28,800 B | 1,200 B | 96% |
| **일일 전송량 (1개 현장)** | - | 2.7 GB | 28.8 MB | **99%** |
| **월간 전송량 (10개 현장)** | - | 810 GB | 8.4 GB | 99% |

**통신 비용 절감:**
- 클라우드 전용: 월 810GB × $0.09/GB = $72.9
- 엣지 + 클라우드: 월 8.4GB × $0.09/GB = **$0.76** (99% 절감)

#### 4.4.6. 엣지 장비 구성 및 무중단 설치 전략

**하드웨어 구성 (1개 현장):**

```
필수 구성품:
┌─────────────────────────────────────────────┬─────────┐
│ 1. Industrial PC (i5, 16GB, 512GB SSD)      │ $900    │
│ 2. AI Accelerator (Hailo-8 M.2)             │ $200    │
│ 3. DIN Rail Mount Kit                       │ $30     │
│ 4. Industrial Power Supply (24V DC)         │ $50     │
│ 5. RS-485 / Modbus Gateway (Isolated)       │ $100    │
├─────────────────────────────────────────────┼─────────┤
│ 소계:                                        │ $1,280  │
└─────────────────────────────────────────────┴─────────┘

선택 구성품:
┌─────────────────────────────────────────────┬─────────┐
│ 6. 4G/5G LTE Modem (Backup Network)         │ $150    │
│ 7. External UPS (24V DC, 30min Backup)      │ $120    │
├─────────────────────────────────────────────┼─────────┤
│ 선택 소계:                                   │ $270    │
└─────────────────────────────────────────────┴─────────┘

총계: $1,280 (필수) + $270 (선택) = $1,550
```

**무중단 설치 (Non-disruptive Installation) 전략:**

하수처리장은 24시간 연속 가동되어야 하므로, 시스템 설치 중에도 처리가 중단되어서는 안 됩니다. 이를 위해 **Bypass & Parallel** 전략을 사용합니다.

```
Step 1: 병렬 모니터링 시스템 구축 (Parallel Monitoring)
- 기존 PLC 제어망에 "Read-Only"로 엣지 PC 연결
- 기존 제어 로직(PLC)은 그대로 유지하며, AI는 데이터 수집 및 가상 제어(Shadow Mode)만 수행
- 공정 영향: 없음 (Zero Downtime)

Step 2: 이중화 제어망 구성 (Redundant Control Network)
- AI 제어 명령을 PLC의 예비 메모리 영역(Memory Map)에 쓰도록 설정
- PLC 로직 수정: "AI 운전 모드" 스위치 신설
  - 스위치 OFF (기본): 기존 로직대로 운전
  - 스위치 ON: AI 제어값(예비 메모리)을 읽어서 구동
- 공정 영향: PLC 프로그램 업데이트 시 약 1분 미만 정지 (새벽 시간대 수행)

Step 3: 단계적 제어권 이양 (Phased Handover)
- 비중요 설비(예: 간헐 포기 타이머)부터 AI 모드 활성화
- 안정성 검증 후 중요 설비(송풍기 속도, 약품 투입)로 확대
- 비상 시 하드웨어 스위치로 즉시 기존 로직 복귀 (Bypass)
```

**물리적 설치 (금강엔지니어링 시설):**

```
PLC 제어반 내부 또는 별도 엣지 함체 설치:
┌────────────────────────────────────────────┐
│  기존 PLC 제어반                            │
│  ┌──────────────┐                          │
│  │ PLC          │                          │
│  │ (LS, Mitsubishi)                        │
│  └───────┬──────┘                          │
│          │ Modbus TCP (Ethernet Switch)    │
│          ↓                                 │
│  ┌──────────────────────────────┐         │
│  │ Industrial Edge PC           │         │
│  │ (Fanless, DIN Rail Mount)    │         │
│  │                               │         │
│  │ [안전 이중화]                  │         │
│  │ • Watchdog Timer 설정         │         │
│  │ • Dual LAN (제어망/외부망 분리) │         │
│  │                               │         │
│  └──────────────────────────────┘         │
│                                            │
│  전원: DC 24V (제어반 내부 전원 활용)         │
└────────────────────────────────────────────┘
```

#### 4.4.7. 비용 분석 (클라우드 vs 엣지 IPC)

**1개 현장 기준 3년 TCO (Total Cost of Ownership):**

| 항목 | 클라우드 전용 | 엣지 IPC + 클라우드 (제안) |
|------|-------------|---------------------|
| **초기 투자** |  |  |
| 하드웨어 | $0 | $1,280 (Industrial PC Set) |
| 설치비 | $0 | $500 (엔지니어 2일, 무중단 설치) |
| **소계** | **$0** | **$1,780** |
|  |  |  |
| **월 운영비** |  |  |
| 클라우드 컴퓨팅 | $200 (GPU 인스턴스) | $0 (엣지 처리) |
| 데이터 전송 | $73 (810GB/월) | $0.76 (8.4GB/월) |
| 스토리지 | $15 (100GB) | $2 (로컬 + 클라우드 백업) |
| 유지보수 | $50 | $10 (원격 모니터링, IPC 내구성 우수) |
| **소계** | **$338/월** | **$13/월** |
|  |  |  |
| **3년 비용** |  |  |
| 초기 투자 | $0 | $1,780 |
| 36개월 운영비 | $12,168 | $468 |
| **총계** | **$12,168** | **$2,248** |
| **절감액** | - | **$9,920 (81% 절감)** |

**10개 현장 확장 시:**
- 클라우드 전용: $121,680
- 엣지 IPC + 클라우드: $22,480
- **절감액: $99,200 (81% 절감)**

**투자 회수 기간 (ROI):**
```
초기 투자: $1,780
월 절감액: $338 - $13 = $325

ROI = $1,780 / $325 = 5.5개월
```
산업용 PC 사용으로 초기 투자비는 상승했으나, 내구성 확보로 인한 유지보수 비용 감소와 클라우드 비용 절감으로 **6개월 이내 투자 회수**가 가능합니다.
```

#### 4.4.8. 실증 계획 (Industrial Edge AI 기반)

**Phase 1: 엣지 프로토타입 개발 (2개월)**

```
Month 1: 개발 환경 구축
┌─────────────────────────────────────────┐
│ Week 1: 하드웨어 설정                    │
│ • RPi 5 + AI Kit 설치                   │
│ • Hailo SDK 환경 구축                   │
│ • PLC 시뮬레이터 연결 테스트             │
├─────────────────────────────────────────┤
│ Week 2-3: AI 모델 최적화                │
│ • TensorFlow → ONNX 변환                │
│ • ONNX → Hailo HEF 컴파일               │
│ • 추론 속도 벤치마크 (목표: <2초)         │
├─────────────────────────────────────────┤
│ Week 4: PLC 연동 테스트                 │
│ • Modbus TCP 통신 구현                  │
│ • 센서 데이터 수집 (1분 주기)            │
│ • 제어 명령 전송 테스트                  │
└─────────────────────────────────────────┘

Month 2: 통합 및 검증
┌─────────────────────────────────────────┐
│ Week 5-6: Safety Layer 구현             │
│ • 6층 검증 로직 개발                     │
│ • Fallback 전략 구현                    │
│ • 시뮬레이션 테스트 (10개 시나리오)      │
├─────────────────────────────────────────┤
│ Week 7: Gateway 연동                    │
│ • MQTT 데이터 전송                      │
│ • 데이터 압축 (목표: 95% 이상)           │
│ • OTA 업데이트 테스트                    │
├─────────────────────────────────────────┤
│ Week 8: 성능 검증                       │
│ • 72시간 연속 운전 시뮬레이션            │
│ • 메모리 누수, CPU 부하 모니터링         │
│ • 전력 소비 측정 (목표: <10W)            │
└─────────────────────────────────────────┘

산출물:
✓ RPi AI Kit 기반 엣지 시스템 v1.0
✓ 성능 벤치마크 리포트
✓ 설치 매뉴얼
```

**Phase 2: 현장 파일럿 테스트 (4개월)**

```
Month 3-4: 금강엔지니어링 시설 설치
┌─────────────────────────────────────────┐
│ Week 9: 현장 설치                        │
│ • PLC 제어반 DIN 레일 마운트             │
│ • 센서 연결 (DO, pH, 차압계 등)          │
│ • 네트워크 설정 (LAN + 4G 백업)          │
├─────────────────────────────────────────┤
│ Week 10-11: 모니터링 모드 (2주)         │
│ • AI 예측만 실행, 실제 제어 없음         │
│ • 예측값 vs 실측값 비교                  │
│ • 운영자 교육 및 피드백 수집             │
├─────────────────────────────────────────┤
│ Week 12-13: 반자동 모드 (2주)           │
│ • AI 권장사항 표시 + 운영자 승인         │
│ • 비중요 설비부터 제어 (간헐 포기 등)    │
│ • Safety Layer 실증                     │
├─────────────────────────────────────────┤
│ Week 14-17: 자동 모드 (4주)             │
│ • 주간 완전 자동 (운영자 감시만)         │
│ • 야간 자동 (비상 대기조 확보)           │
│ • 주말 48시간 무인 운전 테스트           │
└─────────────────────────────────────────┘

산출물:
✓ 72시간 연속 무인 운전 성공
✓ 에너지 절감 15% 달성
✓ 실증 결과 보고서
```

**Phase 3: 성능 최적화 및 확장 준비 (2개월)**

```
Month 5-6: 최적화 및 문서화
┌─────────────────────────────────────────┐
│ Month 5: 모델 재학습                     │
│ • 4개월 현장 데이터로 Fine-tuning        │
│ • MAPE < 10% 달성 확인                   │
│ • 계절별 특성 반영                       │
├─────────────────────────────────────────┤
│ Month 6: 확장 준비                       │
│ • Transfer Learning 매뉴얼 작성          │
│ • 원격 배포 시스템 구축 (Ansible)        │
│ • 10개 현장 확장 계획 수립               │
└─────────────────────────────────────────┘

산출물:
✓ 최적화된 AI 모델 v2.0
✓ 기술 이전 가이드라인
✓ 10개 현장 확장 계획서
```

---

## 5. 법규 준수 및 규제 대응 방안 (Regulatory Compliance)

### 5.1. 관련 법규 및 기준

**주요 적용 법규:**
1. 「물환경보전법」 제32조 (수질오염물질의 총량관리)
2. 「물환경보전법 시행규칙」 별표 13 (방류수 수질 기준)
3. 「하수도법」 제7조 (공공하수도의 설치 및 관리)
4. 「환경오염시설의 통합관리에 관한 법률」

**방류수 수질 기준 (지역별 차등 적용):**

| 항목 | 1지역 | 2지역 | 3지역 | 4지역 | AI 목표값 |
|------|-------|-------|-------|-------|-----------|
| BOD | 10 mg/L | 10 mg/L | 10 mg/L | 10 mg/L | 8 mg/L (안전율 20%) |
| COD | 40 mg/L | 40 mg/L | 40 mg/L | 40 mg/L | 32 mg/L (안전율 20%) |
| SS | 10 mg/L | 10 mg/L | 10 mg/L | 10 mg/L | 8 mg/L (안전율 20%) |
| T-N | 20 mg/L | 20 mg/L | 20 mg/L | 20 mg/L | 16 mg/L (안전율 20%) |
| T-P | 2 mg/L | 2 mg/L | 2 mg/L | 2 mg/L | 1.6 mg/L (안전율 20%) |

*AI 시스템은 법적 기준의 80% 수준을 목표값으로 설정하여 안전 마진 확보*

### 5.2. 수질원격감시체계(TMS) 연동

**TMS 연동 사양:**
- 전송 프로토콜: MODBUS TCP/IP 또는 OPC UA
- 전송 주기: 10분 단위 (법적 요구사항)
- 전송 항목: 유량, pH, BOD, COD, SS, T-N, T-P, 운전 상태
- 데이터 포맷: 환경부 표준 포맷 준수
- 암호화: TLS 1.3 이상

**데이터 투명성 확보:**
- AI 제어 로그 자동 저장 (제어 근거 기록)
- 월간 운전 보고서 자동 생성
- 관계 기관 실시간 조회 가능 (읽기 전용 권한)

### 5.3. 법적 책임 및 보험 가입 (Legal Liability & Insurance)

**AI 제어 실패에 따른 책임 소재 명확화:**
AI 자율 운전 중 발생할 수 있는 방류수 수질 기준 초과 등 법적 문제에 대비하여 책임 소재를 명확히 합니다.

1. **운영사(Client) 책임**:
   - 설비 노후화, 센서 고장 방치 등 물리적 관리 소홀로 인한 사고
   - AI 권고를 무시하고 강제 수동 운전하여 발생한 사고
   - 천재지변, 외부 해킹 등 불가항력적 요인

2. **개발사(Provider) 책임**:
   - AI 알고리즘의 명백한 설계 오류로 인한 오작동
   - 소프트웨어 버그로 인한 시스템 중단
   - 사전 고지된 성능(예측 정확도) 미달로 인한 제어 실패

**전문인 배상책임보험 (E&O Insurance) 가입:**
기술적 결함으로 인한 제3자의 재정적 손실을 보상하기 위해 **Technology Errors & Omissions (Tech E&O)** 보험에 가입합니다.
- **보장 범위**: 소프트웨어 오류, 성능 미달, 데이터 유출, 지적재산권 침해
- **보상 한도**: 사고당 최대 10억 원 (예상)
- **면책 조항**: 사용자의 고의적 오조작, 권장 하드웨어 미사용 등

### 5.4. 비상시 대응 프로토콜

**Fail-Safe 시스템 설계:**

```
Level 1 경고 (Warning):
Trigger: 방류수 수질 > 법적 기준의 70%
Action:
- 운영자 대시보드 경고 표시 (노란색)
- Feed-forward 제어 강화
- 예측 모델 재검증

Level 2 주의 (Caution):
Trigger: 방류수 수질 > 법적 기준의 80%
Action:
- 운영자 SMS 알림 발송
- Feedback 제어 비중 증가 (30% → 60%)
- 송풍량 강제 증가 (+30%)
- 약품 투입 준비

Level 3 긴급 (Emergency):
Trigger: 방류수 수질 > 법적 기준의 90%
Action:
- 관리자 긴급 전화 알림 (자동 발신)
- 모든 송풍기 최대 가동
- 약품 자동 투입
- 수동 모드 전환 권고
- 사고 보고서 자동 생성

Level 4 위기 (Critical):
Trigger: 방류수 수질 > 법적 기준 초과
Action:
- 자동으로 수동 모드 전환
- 관계 기관 자동 통보
- 비상 대응 팀 소집
- 원인 분석 및 개선 조치
```

**센서 고장 대응:**
- 이중화 센서: 주요 측정 항목(COD, DO, pH) 2개 이상 설치
- 센서 상태 진단: 실시간 헬스 체크 (신호 노이즈, 드리프트 감지)
- 고장 시 대체 로직: 과거 동일 시간대 평균값 사용 + Feedback 제어 전환

**사이버 보안 대책:**
- 네트워크 분리: OT 시스템과 IT 시스템 물리적 분리
- 접근 제어: 2단계 인증(2FA) + IP 화이트리스트
- 침입 탐지: IDS/IPS 시스템 설치
- 정기 보안 감사: 분기별 취약점 점검
- 백업: 제어 로직 daily backup, 오프라인 저장

---

## 6. 데이터 관리 및 품질 보증 계획

### 6.1. 데이터 수집 프로토콜

**수집 주기별 전략:**

| 데이터 타입 | 수집 주기 | 저장 기간 | 백업 주기 |
|-------------|-----------|-----------|-----------|
| 실시간 센서 데이터 | 1분 | 3년 | 일일 |
| AI 예측 결과 | 1시간 | 5년 | 주간 |
| 제어 명령 로그 | 실시간 | 5년 | 일일 |
| 운전원 조작 기록 | 실시간 | 5년 | 주간 |
| 실험실 분석 결과 | 주 2회 | 10년 | 월간 |
| 설비 상태 정보 | 1시간 | 설비 수명 동안 | 월간 |

### 6.2. 데이터 품질 보증 (QA/QC)

**품질 검증 프로세스:**

1. **Tier 1 - 실시간 검증 (1분 주기)**
   - 물리적 범위 체크 (Range Check)
   - 변화율 체크 (Rate of Change): 1분간 5% 이상 변화 시 재측정
   - 센서 간 상관관계 체크: COD vs BOD 비율 (1.2~2.0 범위)

2. **Tier 2 - 단기 검증 (1시간 주기)**
   - 이동평균 기준 이상치 탐지
   - 센서 드리프트 자동 보정
   - 결측치 보간 및 플래깅

3. **Tier 3 - 중기 검증 (일일)**
   - 실험실 분석 결과와 센서 값 비교 (주 2회)
   - 편차 > 15% 시 센서 재교정
   - 데이터 무결성 검사 (Integrity Check)

4. **Tier 4 - 장기 검증 (월간)**
   - 계절별 트렌드 분석
   - 센서 수명 평가 (교체 시기 예측)
   - 데이터 품질 리포트 생성

### 6.3. AI 모델 재학습 전략

**모델 업데이트 주기:**

| 업데이트 타입 | 주기 | 조건 | 데이터 범위 |
|---------------|------|------|-------------|
| 미세 조정 (Fine-tuning) | 월간 | 예측 오차 MAPE > 12% | 최근 1개월 |
| 부분 재학습 | 분기 | 계절 전환기 | 최근 3개월 |
| 전체 재학습 | 연간 | 공정 변경, 설비 교체 | 전체 기간 |
| 긴급 재학습 | 수시 | 성능 급격 저하 (MAPE > 20%) | 문제 발생 전후 2개월 |

**Transfer Learning 전략:**
- 기본 모델(Base Model): 대규모 처리장 데이터로 사전 학습
- 적응 모델(Adapted Model): 소규모 처리장 데이터로 미세 조정
- 필요 데이터: 신규 처리장의 경우 3개월치 데이터로 전이 학습 가능

---

## 7. 추진 일정 및 전략 (Roadmap)

### 7.1. 상세 추진 일정 (12개월)

#### **1단계: 기초 데이터 확보 및 시스템 설계 (1~4개월)**

**1.1. 현장 조사 및 요구사항 분석 (1개월)**
- 대상 처리장 선정 (금강엔지니어링 MBR 시설)
- 기존 설비 현황 조사 (SCADA, PLC, 센서, 통신망)
- 운영 데이터 수집 (과거 1년치 기존 데이터 활용)
- 법규 및 인허가 검토
- 산출물: 요구사항 정의서, 사업 타당성 보고서

**1.2. 센서 네트워크 설계 및 구축 (2~3개월)**
- 추가 센서 선정 및 구매 (COD/BOD 온라인 분석기)
- 기존 센서 활용 (DO, pH, 차압계, 유량계 등)
- 통신 인프라 보강 (MODBUS/TCP 연동)
- 센서 교정 및 시운전
- 산출물: 센서 네트워크 설계서, 설치 완료 보고서

**1.3. 데이터 수집 시스템 개발 (2~4개월, 병렬 진행)**
- PLC/SCADA 연동 모듈 개발
- 데이터베이스 설계 (시계열 DB: InfluxDB)
- 데이터 전처리 파이프라인 구축
- 실시간 대시보드 개발 (Web 기반)
- 기존 운영 데이터 통합 (과거 1년치)
- 산출물: 데이터 수집 시스템 매뉴얼, AI 학습용 Dataset (기존 데이터 + 신규 3개월 데이터)

**1단계 마일스톤:**
- M1-1: 센서 네트워크 설치 완료 (3개월)
- M1-2: 데이터 수집 시스템 구축 완료 (4개월)

---

#### **2단계: AI 알고리즘 개발 및 시뮬레이션 (5~8개월)**

**2.1. AI 모델 개발 (5~7개월, 병렬 진행)**
- Feature Engineering (입력 변수 25개 선정 및 가공)
- 모델 아키텍처 설계 (Bidirectional LSTM with Attention)
- 학습 데이터 전처리 및 정규화
- 모델 학습 및 하이퍼파라미터 튜닝 (GPU 서버 활용)
- 성능 평가 (MAPE, RMSE, R² Score)
- 산출물: AI 모델 v1.0, 학습 보고서

**2.2. 제어 알고리즘 개발 (6~8개월, 병렬 진행)**
- Feed-forward 제어 로직 설계
- Hybrid 제어 알고리즘 개발 (Feed-forward 70% + Feedback 30%)
- 최적화 목적함수 구현 (PSO 알고리즘)
- Fail-Safe 로직 구현 (4단계 경보 시스템)
- 인터락 제어 통합 (기존 PLC 시스템 연동)
- 산출물: 제어 알고리즘 설계서, 소스코드

**2.3. 시뮬레이션 검증 및 시스템 통합 (7~8개월, 병렬 진행)**
- 공정 시뮬레이터 구축 (금강엔지니어링 시설 기반)
- AI 모델 + 제어 알고리즘 통합 테스트
- 다양한 시나리오 시뮬레이션 (정상/고부하/저부하/센서고장)
- AI 엔진 ↔ PLC/SCADA 연동 모듈 개발
- 운영자 대시보드 고도화 (Web + Mobile)
- 산출물: 시뮬레이션 결과 보고서, 통합 시스템 v1.0

**2단계 마일스톤:**
- M2-1: AI 모델 예측 정확도 MAPE < 10% 달성 (7개월)
- M2-2: 시뮬레이션 에너지 절감 15% 검증 (8개월)

---

#### **3단계: 현장 실증 및 성능 검증 (9~12개월)**

**3.1. 파일럿 테스트 (9~10개월)**
- Phase 1: 주간 모니터링 모드 (AI 예측만, 제어 X)
  - 기간: 2주
  - 목적: AI 예측 vs 실측값 비교, 운영자 신뢰도 확보

- Phase 2: 주간 반자동 모드 (AI 추천 + 운영자 승인)
  - 기간: 2주
  - 목적: 제어 로직 검증, 운영자 교육

- Phase 3: 주간 자동 모드 (AI 완전 자동)
  - 기간: 4주
  - 목적: 24시간 연속 운전 안정성 확인

**3.2. 본격 실증 (10~11개월)**
- 야간 무인 운전 확대 (18:00~08:00)
- 주말 무인 운전 (토~일 48시간)
- 연속 무인 운전 도전 (72시간+)
- A/B 테스트 수행:
  - A그룹: AI 자동 운전 (1주)
  - B그룹: 기존 운영자 운전 (1주)
  - 비교 지표: 전력 사용량, 수질 안정성, 약품 사용량

**3.3. 성능 검증 및 최적화 (11~12개월)**
- KPI 달성 여부 확인:
  - 수질 기준 초과 0회 ✓
  - 전력 절감 15% 이상 ✓
  - 예측 MAPE 10% 이하 ✓
  - 72시간 무인 운전 ✓
- 운영 피드백 반영 (UI/UX 개선)
- 최종 모델 튜닝
- 확장성 검증 (Transfer Learning 전략 수립)
- 산출물: 실증 결과 보고서, 성능 인증서, 기술 이전 가이드라인

**3단계 마일스톤:**
- M3-1: 72시간 연속 무인 운전 성공 (11개월)
- M3-2: 모든 KPI 목표 달성 (12개월)

---

### 7.2. 단계별 예산 계획

| 단계 | 항목 | 세부 내역 | 금액 (백만원) |
|------|------|-----------|---------------|
| **1단계 (1~4개월)** | 센서 및 장비 | 추가 센서 (COD/BOD 온라인) | 80 |
|  | 통신 인프라 | 네트워크 보강, MODBUS 연동 | 30 |
|  | 데이터 서버 | 시계열 DB 서버 (InfluxDB) | 50 |
|  | 인건비 | 연구원 5명 × 4개월 | 100 |
|  | 실험실 분석비 | 주 2회 × 16주 | 10 |
| **1단계 소계** |  |  | **270** |
| **2단계 (5~8개월)** | AI 개발 환경 | GPU 서버, 클라우드 비용 | 100 |
|  | 소프트웨어 라이선스 | 시뮬레이터, 개발 도구 | 50 |
|  | 인건비 | 연구원 6명 × 4개월 | 120 |
|  | 외부 자문 | AI 전문가, 공정 전문가 | 30 |
| **2단계 소계** |  |  | **300** |
| **3단계 (9~12개월)** | 현장 설치비 | 통합 시스템 구축 | 80 |
|  | 실증 운영비 | 전력, 약품, 인건비 | 50 |
|  | 성능 검증비 | 제3자 인증, 실험 분석 | 40 |
|  | 인건비 | 연구원 5명 × 4개월 | 100 |
|  | 문서화 및 특허 | 보고서, 특허 출원 | 30 |
| **3단계 소계** |  |  | **300** |
| **간접비 (20%)** |  |  | **174** |
| **총 연구비 (12개월)** |  |  | **1,044** |

### 7.3. 시설 및 장비 유지보수 계획 (실제 운영 매뉴얼 기반)

본 절은 금강엔지니어링 폐수처리 현장 운영 매뉴얼을 기반으로 작성되었습니다.

#### 7.3.1. 일일 점검 (1회/일)

**점검 시간**: 오전 1회 (09:00)

| 항목 | 점검 내용 | 기준값 | 조치사항 |
|------|-----------|--------|----------|
| **분리막 차압계** | TMP (막간압력차) 확인 | < 0.3 bar (정상) 0.3~0.5 bar (주의) > 0.5 bar (역세 필요) | 0.5 bar 초과 시 역세 스케줄 조정 |
| **각 조 수위** | 수위센서 정상 작동 확인 | HHAL/HH/H/L 레벨 | 이상 시 센서 점검 |
| **폐수 색상/냄새** | 육안 확인 (각 조) | 정상 범위 | 이상 시 유입 이력 확인 |
| **순환수 가압펌프** | 토출 압력 | 45~55 bar | 압력 이상 시 펌프 점검 |
| **공기용해접촉장치** | 압력 게이지 | 6~8 bar | 공기압축기 상태 확인 |
| **방류 유량계** | 판넬 vs 현장 지침 일치 | 오차 < 5% | 불일치 시 센서 보정 |
| **터보 브로워** | 운전 상태, 이상음 | 정상 작동 | 진동/소음 이상 시 즉시 점검 |

**점검 기록**: PLC 화면 "운전상태" 메뉴에서 확인 및 기록

#### 7.3.2. 주간 점검 (1회/주)

**점검 시간**: 매주 토요일 오전

| 항목 | 점검 내용 | 작업 방법 | 소요시간 |
|------|-----------|-----------|----------|
| **DO 센서 세척** | 분리막조 DO 센서 | 1. 센서 인양 2. 증류수로 세척 3. 교정액 확인 (필요 시) | 15분 |
| **pH 센서 세척** | pH조정조 pH 센서 | 1. 센서 세척 2. 포터블 pH미터 실측 3. 리트머스 시험지 대조 | 20분 |
| **터보 브로워 필터** | 에어 필터 교체 | 1. 브로워 정지 2. 필터 교체 3. 재가동 | 10분 |
| **터보 브로워 A/B 교번** | A/B 주간 교번 운전 | PLC 화면에서 교번 설정 | 5분 |
| **분리막 주간세정** | 차아염소산 0.03% 주입 | 1. PLC 역세설정 화면 2. 주간세정 자동 실행 3. 세정 완료 확인 (40분 소요) | 60분 (대기 포함) |
| **펌프 토출압/유량** | 전체 펌프 점검 | 토출압력계 기록, 유량 확인 | 30분 |

**총 소요시간**: 약 2시간 20분

#### 7.3.3. 월간 점검 (1회/월 및 2회/월)

**점검 1 (월 2회: 매월 1일, 15일)**

| 항목 | 점검 내용 | 작업 방법 |
|------|-----------|-----------|
| **분리막조 레벨센서 청소** | 협잡물 부착 제거 | 1. 센서 인양 (호이스트 사용) 2. 고압수 세척 3. 센서 설치 |

**점검 2 (월 1회: 매월 1일)**

| 항목 | 점검 내용 | 작업 방법 | 소요시간 |
|------|-----------|-----------|----------|
| **분리막 인라인세정** | 차아염소산 0.3% 주입 | 1. PLC 역세설정 화면 2. 인라인세정 자동 실행 3. 세정 40분 + 정치 120분 + 공폭기 30분 4. 세정 완료 확인 (총 380분) | 7시간 |
| **약품 재고 확인** | PAC/폴리머/NaOH/차아염소산 | 1. 탱크 레벨 확인 2. 월 소비량 기록 3. 발주 계획 수립 | 30분 |
| **슬러지 성상 확인** | MLSS, SVI 측정 | 1. 시료 채취 (폭기조) 2. 현장 간이 측정 3. 외부 분석 의뢰 (필요 시) | 1시간 |
| **A/C FILTER 차압 확인** | 차압 게이지 점검 | 초기 대비 차압 변화 기록 차압 상승 시 역세 계획 | 10분 |

#### 7.3.4. 분기별 점검 (3개월/1회)

**점검 시간**: 매 분기 첫째 주

| 항목 | 점검 내용 | 작업 내용 |
|------|-----------|-----------|
| **전기 안전 점검** | 전기실 점검, 누전 확인 | 외부 전문업체 의뢰 |
| **펌프 오버홀** | 주요 펌프 베어링/씰 점검 | 주요 펌프 순차 점검 |
| **밸브 작동 점검** | 전동밸브, SOL밸브 | 수동 작동 테스트 |
| **탈수기 벨트** | 마모 상태 확인 | 교체 주기 판단 (연 2회 교체 권장) |

#### 7.3.5. 반기별 점검 (6개월/1회)

| 항목 | 점검 내용 | 작업 내용 |
|------|-----------|-----------|
| **터보 브로워 정밀 점검** | 베어링, 벨트 점검 | 외부 전문업체 의뢰 (제조사) |
| **분리막 계외세정** | 막 모듈 인양 후 세정 | 1. 호이스트로 막 인양 2. 차아염소산 침지 3. 고압수 세척 4. 재설치 (1일 소요) |
| **전체 센서 교정** | 모든 센서 보정 | 표준액 사용 교정 또는 교체 |
| **PLC 백업** | 프로그램 및 설정 백업 | USB 백업 + 클라우드 업로드 |

#### 7.3.6. 연간 점검 (1년/1회)

| 항목 | 점검 내용 | 작업 내용 | 비용 (백만원) |
|------|-----------|-----------|---------------|
| **분리막 모듈 교체** | 수명 도래 모듈 교체 | 제조사 권장 교체 주기 5~7년 (성능 저하 시 조기 교체) | 모듈당 5~10 |
| **터보 브로워 오버홀** | 전면 정비 | 제조사 의뢰 | 3~5 |
| **주요 펌프 교체** | 수명 도래 펌프 | 설치 후 10년 이상 펌프 | 대당 2~5 |
| **법정 검사** | 환경부 TMS 점검, 전기 안전 검사 | 공인기관 의뢰 | 1~2 |

#### 7.3.7. AI 시스템 특화 유지보수 (신규 추가)

**AI 모델 재학습 (월 1회)**
- 최근 1개월 데이터 반영
- 모델 성능 지표 확인 (MAPE, R²)
- 성능 저하 시 재학습 실행

**AI 시스템 백업 (주 1회)**
- 학습된 모델 가중치 백업
- 제어 로직 백업
- 데이터베이스 백업

**센서 이상 감지 모니터링 (실시간)**
- 센서 드리프트 자동 보정
- 이상치 자동 필터링
- 결측치 보간

**제어 성능 모니터링 (일 1회)**
- AI 제어 vs 실제 성능 비교
- 에너지 절감률 트래킹
- 수질 안정성 확인

#### 7.3.8. 예비품 목록 및 재고 관리

**필수 예비품 (상시 보유)**

| 항목 | 수량 | 교체 주기 | 비고 |
|------|------|-----------|------|
| DO 센서 | 1개 | 2년 | 즉시 교체 가능 대비 |
| pH 센서 | 1개 | 1년 | 즉시 교체 가능 대비 |
| 터보 브로워 필터 | 10개 | 주 1회 | 월 4~5개 소비 |
| 펌프 씰 킷 | 각 2세트 | 2~3년 | 주요 펌프별 |
| 펌프 베어링 | 각 1세트 | 5년 | 주요 펌프별 |
| 전동밸브 | 1개 | 10년 | 고장 시 즉시 교체 |
| 레벨센서 | 각 조 1개 | 5년 | 수위 제어 필수 |

**약품 재고 관리**

| 약품명 | 저장 용량 | 월 소비량 (추정) | 안전 재고 |
|--------|-----------|------------------|-----------|
| PAC (액상) | 5 톤 | 2 톤 | 최소 2개월분 |
| 폴리머 (액상) | 1 톤 | 0.3 톤 | 최소 2개월분 |
| NaOH (액상) | 2 톤 | 0.5 톤 | 최소 2개월분 |
| 차아염소산 (12%) | 500 L | 100 L | 최소 3개월분 |

#### 7.3.9. 유지보수 비용 추정 (연간)

| 항목 | 세부 내역 | 연간 비용 (백만원) |
|------|-----------|-------------------|
| **정기 점검** | 일일/주간/월간 인건비 | 8 |
| **약품비** | PAC/폴리머/NaOH/차아염소산 | 30 |
| **전력비** | 터보 브로워 + 펌프 + 기타 | 40 |
| **센서 교체** | DO/pH 센서 정기 교체 | 2 |
| **필터/소모품** | 브로워 필터, 기타 | 3 |
| **외부 점검** | 전기 안전, 법정 검사 | 2 |
| **예비품 구비** | 펌프 부품, 밸브 등 | 5 |
| **분리막 유지** | 주간세정/인라인세정 약품 | 3 |
| **AI 시스템 유지** | 서버 운영, 라이선스 | 5 |
| **비상 수리비** | 예비비 (10%) | 10 |
| **합계** |  | **108** |

**AI 도입 후 절감 효과 (연간)**
- 전력비 절감: 40 × 15% = 6백만원
- 약품비 절감: 30 × 10% = 3백만원
- 인건비 절감: 8 × 20% = 1.6백만원 (효율화)
- **총 절감**: 약 10.6백만원/년

**순 운영비**: 108 - 10.6 = **97.4백만원/년**

---

## 8. 리스크 관리 계획

### 8.1. 리스크 매트릭스

| 리스크 ID | 리스크 항목 | 발생 가능성 | 영향도 | 심각도 | 대응 전략 |
|-----------|-------------|-------------|--------|--------|-----------|
| R-01 | 센서 고장 빈발 | 중 (40%) | 높음 | **높음** | 이중화, 예비 센서 확보 |
| R-02 | AI 예측 정확도 미달 | 중 (30%) | 높음 | **높음** | 모델 다양화, 앙상블 기법 |
| R-03 | 방류수 수질 기준 초과 | 저 (10%) | 매우 높음 | **높음** | Fail-Safe 다중화, 실시간 모니터링 |
| R-04 | 데이터 부족 (계절별) | 저 (20%) | 중간 | 중간 | 다년간 데이터 확보, 유사 처리장 데이터 활용 |
| R-05 | SCADA 연동 실패 | 중 (30%) | 중간 | 중간 | 표준 프로토콜 사용, 사전 호환성 테스트 |
| R-06 | 운영자 저항 | 중 (40%) | 중간 | 중간 | 교육 강화, 점진적 도입 |
| R-07 | 사이버 보안 침해 | 저 (15%) | 높음 | **중간** | 네트워크 분리, 침입 탐지 시스템 |
| R-08 | 예산 초과 | 중 (30%) | 중간 | 중간 | 단계별 검증, 우선순위 관리 |
| R-09 | 일정 지연 | 중 (35%) | 중간 | 중간 | 여유 기간 확보, 병렬 작업 |
| R-10 | 법규 변경 | 저 (10%) | 중간 | 낮음 | 법규 모니터링, 유연한 설계 |
| R-11 | 분리막 차압 상승 (막 오염) | 중 (40%) | 높음 | **높음** | 차압 예측 AI 모델, 역세 최적화 |
| R-12 | pH 센서 드리프트 | 중 (35%) | 중간 | 중간 | 실측 대조 + 센서 신뢰도 자동 진단 |
| R-13 | 흡입펌프 과가동 (막 폐쇄) | 저 (20%) | 높음 | 중간 | 타이머 제한 + 유입 유량 예측 동적 조절 |

### 8.2. 기술적 리스크 대응

**R-02: AI 예측 정확도 미달 대응 상세:**

```
1차 대응 (MAPE 10~15%):
- Feature 재선정 (상관관계 분석)
- 하이퍼파라미터 재튜닝 (Grid Search)
- 학습 데이터 증강 (Data Augmentation)

2차 대응 (MAPE 15~20%):
- 모델 구조 변경 (LSTM → Transformer)
- 앙상블 기법 적용 (3개 모델 평균)
- 외부 변수 추가 (기상 데이터, 지역 이벤트)

3차 대응 (MAPE > 20%):
- 전문가 자문 (AI, 공정 전문가)
- 대체 알고리즘 검토 (Hybrid Physics-AI 모델)
- 목표 수정 협의 (발주처와 협의)
```

### 8.3. AI Safety Layer 상세 설계 (안전 검증 시스템)

AI 자동운전 시스템의 안전성을 보장하기 위해 **다층 검증(Multi-Layer Validation)** 체계를 구축합니다.

#### 8.3.1. Safety Layer 구조

```python
def safe_control(ai_command, current_state, prediction_result):
    """
    AI 제어 명령을 실행하기 전 안전성 검증

    Args:
        ai_command: PSO가 생성한 제어 파라미터
        current_state: 현재 시스템 상태 (센서 데이터)
        prediction_result: Bi-LSTM 예측 결과

    Returns:
        validated_command: 검증된 제어 명령 또는 Fallback 명령
    """

    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    # Layer 1: 물리적 제약 확인 (Physical Constraints)
    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    if not check_physical_limits(ai_command):
        logger.warning("Physical constraint violated")
        return fallback_to_rule_based()

    # 세부 검증 항목:
    # • 펌프 용량 초과 여부 (정격 대비 80% 이내)
    #   - 유량조정조 펌프: ≤ 0.4 m³/min (정격 0.5의 80%)
    #   - 흡입펌프: ≤ 0.16 m³/min (신규막 0.2의 80%)
    # • 터보 브로워 주파수: 30~60 Hz (인버터 한계)
    # • 약품 잔량 충분 여부 (최소 3일분)
    #   - PAC 탱크: ≥ 30% (5 m³ 중 1.5 m³ 이상)
    #   - NaOH 탱크: ≥ 20%
    # • 설비 연속 가동 시간 (과부하 방지)
    #   - 터보 브로워: 연속 48시간 이상 시 1시간 휴지
    #   - 흡입펌프: 7분 연속 가동 금지 (막 폐쇄 방지)

    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    # Layer 2: 예측 신뢰도 확인 (Prediction Confidence)
    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    uncertainty = calculate_uncertainty(prediction_result)

    if uncertainty > 0.3:
        # 예측 불확실성이 높을 경우 보수적 제어
        logger.info(f"High uncertainty: {uncertainty:.2f}, applying safety margin")
        ai_command = apply_safety_margin(ai_command, factor=1.2)
        # 예: 송풍량 ×1.2, 약품 투입량 ×1.15

    # 불확실성 계산 방법:
    # • Monte Carlo Dropout (추론 시 10회 반복)
    # • 예측값의 표준편차 / 평균값
    # • Attention weight의 분산도 (집중도가 낮으면 불확실)

    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    # Layer 3: 센서 이상 감지 (Sensor Anomaly Detection)
    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    sensor_status = detect_sensor_anomaly(current_state)

    if sensor_status['critical_failure']:
        # 복수 센서 동시 이상 → 수동 모드 전환
        logger.critical("Multiple sensor failure detected")
        return switch_to_manual_mode()

    if sensor_status['minor_failure']:
        # 단일 센서 이상 → 백업 센서 또는 추정값 사용
        current_state = use_backup_sensor(current_state, sensor_status)

    # 센서 이상 감지 알고리즘:
    # 1. 결측값 확인 (1분 이상 데이터 수신 없음)
    # 2. 물리적 한계 초과
    #    - pH: 0~14 범위 벗어남
    #    - DO: 음수 또는 20 ppm 초과
    #    - 차압: 음수 또는 100 kPa 초과
    # 3. 급격한 변화율 (1분당 변화량)
    #    - pH: ±2 이상 변화 (정상 ±0.3)
    #    - DO: ±3 ppm 이상 변화 (정상 ±0.5)
    # 4. 센서 간 불일치
    #    - 유량계 (판넬 vs 현장): 오차 > 10%
    #    - pH (온라인 vs 포터블): 오차 > 0.5

    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    # Layer 4: 법적 기준 사전 확인 (Regulatory Compliance)
    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    predicted_effluent = prediction_result['effluent_quality']
    legal_limits = {
        'COD': 40,  # mg/L
        'BOD': 10,
        'SS': 10,
        'T-N': 20,
        'T-P': 2
    }

    # 예상 방류수질이 법적 기준의 80% 초과 시 경고
    for param, limit in legal_limits.items():
        if predicted_effluent[param] > limit * 0.8:
            logger.warning(f"{param} predicted: {predicted_effluent[param]:.1f} (>80% of limit)")
            # 송풍량 강제 증가 (DO +0.5 mg/L)
            ai_command['blower_speed'] = min(ai_command['blower_speed'] * 1.15, 100)
            # 운영자 경고 발송
            send_alert(f"{param} 기준 초과 위험", level="WARNING")

    # 예상 방류수질이 법적 기준의 90% 초과 시 비상 모드
    for param, limit in legal_limits.items():
        if predicted_effluent[param] > limit * 0.9:
            logger.critical(f"{param} critical: {predicted_effluent[param]:.1f} (>90% of limit)")
            return emergency_mode()

    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    # Layer 5: 인터록 검증 (Interlock Validation)
    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    if not check_interlock_safety(ai_command, current_state):
        logger.error("Interlock condition violated")
        return hold_current_state()

    # 인터록 검증 항목 (금강엔지니어링 PLC 로직 기반):
    # • 분리막조 HHAL (초고수위) → 1차처리수조 펌프 강제 정지
    # • 여과수조 H (고수위) → 흡입펌프 강제 정지
    # • pH 센서 High → NaOH 펌프 강제 정지
    # • 터보 브로워 이상 → 흡입펌프 정지 (DO 부족 방지)
    # • 약품 탱크 Low → 해당 펌프 정지 + 경보

    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    # Layer 6: 단계적 변화 제한 (Rate Limiting)
    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    previous_command = get_previous_command()
    ai_command = apply_rate_limiting(ai_command, previous_command)

    # 급격한 변화 방지 (설비 수명 보호):
    # • 터보 브로워 속도: 1분당 ±10% 이내
    # • 약품 투입량: 5분당 ±20% 이내
    # • 펌프 ON/OFF: 최소 10분 간격 (빈번한 기동 방지)

    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    # All checks passed → Execute AI command
    # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    logger.info("Safety validation passed. Executing AI command.")
    return ai_command
```

#### 8.3.2. Fallback 전략 (비상 대응)

```python
# 우선순위별 Fallback 전략

def fallback_to_rule_based():
    """
    Rule-based 제어로 전환
    (금강엔지니어링 기존 PLC 로직 사용)
    """
    return {
        'mode': 'RULE_BASED',
        'blower_DO_setpoint': 2.5,  # mg/L 고정
        'pump_schedule': 'LEVEL_SENSOR_BASED',
        'chemical_dose': 'STANDARD_RATE',
        'membrane_timer': '7min_ON_2min_OFF'
    }

def conservative_control():
    """
    보수적 제어 (안전 우선)
    """
    return {
        'mode': 'CONSERVATIVE',
        'blower_speed': 80,  # 높은 DO 유지
        'chemical_dose_factor': 1.2,  # 표준값의 120%
        'pump_buffer_time': '+10min',  # 여유 시간 확보
        'alert_threshold': 0.7  # 경보 임계값 낮춤
    }

def emergency_mode():
    """
    비상 모드 (최대 처리 능력)
    """
    send_alert("비상 모드 진입", level="CRITICAL",
               notify=['SMS', 'Email', 'Phone'])

    return {
        'mode': 'EMERGENCY',
        'blower_speed': 100,  # 최대 송풍
        'chemical_PAC': 'MAX_DOSE',
        'chemical_Polymer': 'MAX_DOSE',
        'pump_all': 'ON',
        'manual_intervention': 'REQUIRED'
    }

def switch_to_manual_mode():
    """
    수동 모드 전환 (운영자 직접 제어)
    """
    send_alert("센서 중대 이상 - 수동 모드 전환 필요",
               level="CRITICAL")

    return {
        'mode': 'MANUAL',
        'ai_control': 'DISABLED',
        'display_recommendations': True,  # AI 권고사항만 표시
        'operator_control': 'FULL'
    }
```

#### 8.3.3. 안전성 검증 테스트 시나리오

**시뮬레이션 테스트 (실증 전 필수):**

| 시나리오 ID | 테스트 시나리오 | 기대 동작 | 검증 기준 |
|------------|---------------|----------|----------|
| **S-01** | pH 센서 고장 (값 고정) | 백업 센서 또는 추정값 사용 | 제어 지속 가능 |
| **S-02** | DO 센서 급격한 변화 (±5 ppm/분) | 센서 이상 감지 → 보수적 제어 | 송풍량 ×1.2 |
| **S-03** | 복수 센서 동시 고장 (pH + DO) | 수동 모드 전환 | 30초 이내 전환 |
| **S-04** | AI 예측 COD 45 mg/L (법적 기준 초과) | 비상 모드 진입 | 송풍량 100% |
| **S-05** | 약품 탱크 잔량 < 10% | 해당 펌프 정지 + 경보 | SMS 발송 |
| **S-06** | 터보 브로워 48시간 연속 가동 | 1시간 휴지 스케줄링 | 설비 보호 |
| **S-07** | 분리막조 HHAL 수위 도달 | 1차처리수조 펌프 즉시 정지 | 인터록 작동 |
| **S-08** | PSO 수렴 실패 (50세대 초과) | 이전 제어값 유지 | 시스템 안정성 |
| **S-09** | 급격한 유입 증가 (유량 ×2) | 예측 모델 재실행 (5분 → 1분 주기) | 빠른 대응 |
| **S-10** | 사이버 공격 (PLC 통신 두절) | 독립 운전 모드 (로컬 PLC만) | 시스템 격리 |

**현장 실증 테스트 (단계적):**

```
Phase 1: 안전 모드 테스트 (2주)
- AI 권고사항 표시만, 실제 제어 없음
- 운영자가 AI vs 기존 방식 비교
- Safety Layer 로그 분석

Phase 2: 부분 자동화 테스트 (2주)
- 비중요 설비부터 AI 제어 (예: 간헐 포기 패턴)
- 중요 설비는 운영자 승인 필요
- Fail-Safe 작동 검증 (의도적 센서 차단 실험)

Phase 3: 완전 자동화 테스트 (4주)
- 주간 완전 자동 (운영자 감시만)
- 야간 자동 (비상 대기조 확보)
- 72시간 연속 무인 운전 도전
```

#### 8.3.4. 안전성 인증 및 감사

**제3자 검증:**
- 한국환경공단 기술 검증
- 국제 표준 준수 (ISO 13849-1: Safety of machinery)
- 사이버 보안 인증 (IEC 62443)

**정기 안전 감사:**
- 월간: Safety Layer 로그 리뷰
- 분기: Fail-Safe 시뮬레이션 재실행
- 반기: 센서 교정 및 백업 시스템 점검

### 8.4. 운영 리스크 대응

**R-06: 운영자 저항 대응:**
- 사전 설명회 개최 (프로젝트 착수 전)
- 단계적 도입 (모니터링 → 반자동 → 자동)
- 교육 프로그램 운영 (월 2회, 6개월)
- 인센티브 제공 (AI 활용 우수 사례 포상)
- 운영자 의견 반영 (UI/UX 개선)

### 8.4. 법적 리스크 대응

**R-03: 수질 기준 초과 시나리오:**

```
예방 조치:
- AI 목표값을 법적 기준의 80%로 설정 (안전 마진 20%)
- 3단계 경보 시스템 (70% / 80% / 90%)
- 주간 수질 트렌드 리포트 자동 생성

발생 시 조치:
1. 즉시 자동 모드 해제 → 수동 모드 전환
2. 송풍기 최대 가동 + 약품 투입
3. 관계 기관 즉시 보고 (1시간 이내)
4. 원인 분석 (센서 오류 vs AI 오류 vs 돌발 유입)
5. 재발 방지 대책 수립 (48시간 이내)
6. AI 모델 긴급 재학습

법적 책임:
- 개발사와 운영사 간 책임 범위 명확화 (계약서)
- 배상 책임 보험 가입
- 면책 조항: 천재지변, 제3자 고의 방해 등
```

### 8.5. 실제 운영 리스크 대응 (금강엔지니어링 사례 기반)

**R-11: 분리막 차압 상승 (막 오염) 대응:**

```
현재 운영 방식:
- 주간세정: 주 1회 (토/일 9시, 차아염소산 0.03%, 40분)
- 인라인세정: 분기 1회 (20주차, 차아염소산 0.3%, 380분)
- 차압계 일일 점검 (매뉴얼 기준)

문제점:
- 고정 스케줄로 과도/부족 역세 발생
- 차압 급상승 시 대응 지연

AI 개선 방안:
1. 차압 예측 모델 개발
   - 입력: 유입 SS, 유량, 흡입 시간, 수온
   - 출력: 24시간 후 예측 차압
   - 목표: 차압 상승 72시간 전 예측

2. 동적 역세 스케줄링
   - 예측 차압 > 임계값 80%: 주간세정 조기 실시
   - 예측 차압 < 임계값 50%: 주간세정 1주 연기
   - 에너지 절감: 불필요한 역세 약 30% 감소

3. 인라인세정 최적화
   - 차압 추세 분석으로 인라인 시기 예측
   - 비용 절감: 약품비 연간 약 10% 절감 가능
```

**R-12: pH 센서 드리프트 대응:**

```
현재 운영 방식:
- pH 센서: 주 2회 실측 대조 (포터블 측정기)
- 리트머스 시험지 병행 측정
- 편차 > 15% 시 수동 재교정

문제점:
- 주 2회 점검으로 중간 드리프트 감지 안됨
- pH 제어 오차 → NaOH 과다/과소 투입

AI 개선 방안:
1. 센서 신뢰도 자동 진단
   - 물질 수지 검증: 유입 vs 방류 pH 상관관계 분석
   - 이상 패턴 감지: 급격한 변화, 고정값 지속 등
   - 신뢰도 점수: 0~100% 실시간 산출

2. 가상 센서 (Virtual Sensor)
   - AI 모델로 pH 추정값 생성
   - 실측값과 추정값 편차 > 10%: 드리프트 의심 알림
   - 자동 교정 권고

3. 다중 센서 융합
   - ORP 센서와 교차 검증
   - 약품 투입량 역산으로 pH 추정
```

**R-13: 흡입펌프 과가동 (막 폐쇄 위험) 대응:**

```
현재 운영 방식:
- 타이머 제한: 7분 이상 가동 시 자동 정지
- 정지 시간: 2분 이하 유지
- 분리막조 수위 L 도달 시 펌프 정지

문제점:
- 고정 7분 타이머는 유입량 변동 미고려
- 고유량 시: 7분 내 처리 불가 → 수위 상승
- 저유량 시: 7분은 과도 → 에너지 낭비

AI 개선 방안:
1. 유입 유량 예측 기반 동적 타이머
   - 예측 유입량 高: 가동 시간 9분까지 연장 허용
   - 예측 유입량 低: 가동 시간 5분으로 단축
   - 막 안전성 유지하며 처리 효율 향상

2. 차압 실시간 모니터링 연동
   - 차압 상승률 > 임계값: 즉시 펌프 정지 (7분 대기 불필요)
   - 차압 안정 시: 연속 가동 허용 (최대 10분)

3. 수위-유량 연계 제어
   - 분리막조 수위 상승률 예측
   - HH 도달 30분 전: 흡입펌프 출력 증가
   - 사전 대응으로 수위 경보 발생 방지
```

---

## 9. 경제성 분석 (Economic Analysis)

*본 분석은 표준 하수처리장 운영 비용 및 유사 프로젝트 사례를 기반으로 추정한 수치입니다.*

### 9.1. 총 투자비 (CAPEX)

| 항목 | 세부 내역 | 금액 (백만원) |
|------|-----------|---------------|
| 연구개발비 | 3년간 R&D 비용 | 2,184 |
| 현장 설치비 | 센서, 통신, 서버 (2개소) | 400 |
| 소프트웨어 | AI 플랫폼 라이선스 (영구) | 150 |
| 교육 및 컨설팅 | 운영자 교육, 시스템 안정화 | 100 |
| 예비비 (10%) |  | 283 |
| **총 CAPEX** |  | **3,117** |

### 9.2. 연간 운영비 절감 (OPEX)

**대상 처리장 기준:**
- 규모: 10,000 m³/day (중소 규모)
- 현재 연간 전력비: 200백만 원
- 현재 연간 약품비: 50백만 원
- 현재 연간 인건비: 150백만 원 (3교대)

**절감 효과:**

| 항목 | 절감률 | 절감액 (백만원/년) |
|------|--------|-------------------|
| 전력비 (송풍기 최적화) | 15% | 30 |
| 약품비 (정밀 제어) | 10% | 5 |
| 인건비 (무인화) | 20% | 30 |
| 슬러지 처리비 (발생량 감소) | 5% | 3 |
| 유지보수비 (설비 수명 연장) | 10% | 5 |
| **연간 총 절감액** |  | **73** |

**AI 시스템 유지비:**
- 센서 교체 및 교정: 10백만 원/년
- 소프트웨어 유지보수: 15백만 원/년
- 클라우드 비용: 5백만 원/년
- **연간 총 유지비**: 30백만 원/년

**순 절감액**: 73 - 30 = **43백만 원/년**

### 9.3. 투자 회수 기간 (ROI)

```
ROI = 총 투자비 / 연간 순 절감액
    = 3,117백만 원 / 43백만 원
    = 72.5개월
    ≈ 6.0년

목표: 5년 이내 회수
→ 2개소 이상 동시 적용 시 규모의 경제로 목표 달성 가능
→ 대규모 처리장(50,000 m³/day) 적용 시 3년 이내 회수 가능
```

### 9.4. 민감도 분석

| 시나리오 | 전력 절감률 | 연간 절감액 | ROI (년) |
|----------|-------------|-------------|----------|
| 낙관적 | 20% | 63백만 원 | 4.9년 ✓ |
| 기본 | 15% | 43백만 원 | 6.0년 |
| 보수적 | 10% | 23백만 원 | 11.3년 |

**손익분기점 분석:**
- 최소 절감률: 8.7% 이상 시 투자 회수 가능 (10년 기준)
- 현실성: 기존 연구 사례에서 10~25% 절감 달성 → 목표 달성 가능성 높음

### 9.5. 사회적 편익

**정량적 편익 (전국 확산 시):**
- 대상: 4,200개 처리장
- 연간 전력 절감: 375 GWh (국가 전체)
- 경제적 가치: 450억 원/년
- CO₂ 감축: 17만 톤/년 (소나무 2,500만 그루 식재 효과)

**정성적 편익:**
- 공공수역 수질 개선 (하천, 호소)
- 악취 민원 감소 (안정적 처리)
- 일자리 창출 (AI 엔지니어, 유지보수 인력)
- 기술 수출 (동남아, 중동 시장)

---

## 10. 확장성 및 기술 이전 계획

### 10.1. 처리장 규모별 적용 전략

| 규모 | 처리 용량 | 적용 전략 | 예상 효과 |
|------|-----------|-----------|-----------|
| 소규모 | < 1,000 m³/d | 경량 모델, 클라우드 기반 | 무인화 효과 극대화 |
| 중규모 | 1,000~10,000 m³/d | 표준 모델, 온프레미스 | 본 과제 대상 |
| 대규모 | > 10,000 m³/d | 고도화 모델, 분산 처리 | 에너지 절감 극대화 |

### 10.2. Transfer Learning 적용 방안

**신규 처리장 적용 프로세스:**

```
Step 1: 기본 모델 배포 (Pre-trained Model)
- 대규모 데이터로 학습된 범용 모델 적용
- 예측 정확도: 약 70~80% (초기)

Step 2: 현장 데이터 수집 (3개월)
- 최소 필요 데이터: 3개월 (약 13만 데이터 포인트)
- 계절 특성 고려: 가능하면 6개월 권장

Step 3: Fine-tuning (1개월)
- 현장 데이터로 출력층 재학습
- 예측 정확도: 85~90%로 향상

Step 4: 성능 검증 및 배포 (1개월)
- A/B 테스트 수행
- 정식 운영 시작

총 소요 기간: 5개월 (기존 1년 대비 70% 단축)
```

### 10.3. 공정별 적용 가능성

| 공정 타입 | 적용 가능성 | 필요 수정 사항 |
|-----------|-------------|----------------|
| 표준 활성슬러지법 | ★★★★★ | 없음 (본 과제 대상) |
| A2O (혐기-무산소-호기) | ★★★★☆ | 질산화/탈질 로직 추가 |
| MBR (막분리) | ★★★★☆ | 막 오염 예측 모듈 추가 |
| SBR (회분식) | ★★★☆☆ | 배치 운전 제어 로직 재설계 |
| 산화구법 | ★★★★☆ | 회전수 제어 로직 적용 |

### 10.4. 기술 이전 패키지

**제공 항목:**
1. AI 모델 소스코드 (Python, TensorFlow/PyTorch)
2. 학습된 가중치 (Pre-trained Weights)
3. 데이터 전처리 파이프라인
4. SCADA 연동 모듈 (MODBUS, OPC UA)
5. 운영자 대시보드 (Web 기반)
6. 설치 및 운영 매뉴얼
7. 3개월 기술 지원

**기술 이전 비용:**
- 소규모 처리장: 50백만 원
- 중규모 처리장: 100백만 원
- 대규모 처리장: 200백만 원

### 10.5. 실제 운영 사례 분석 (금강엔지니어링 MBR 시설)

#### 10.5.1. 현장 개요

**시설 제원 (추정):**
- 처리 공정: 가압부상(DAF) + 생물반응(MBR) 하이브리드
- 주요 공정 흐름:
  ```
  유입수 → 유량조정조 → [화학처리] 반응조/pH조정조/응집조
  → 가압부상조 → 1차처리수조 → [생물처리] 폭기조(1~4조)
  → 분리막조(MBR) → 여과수조 → A/C 필터 → 방류조
  ```
- 처리 용량: 약 200~500 m³/day 추정 (유량계 범위 기준)
- 무인화 수준: PLC 기반 자동 제어 (REMOTE 모드)

**설비 현황:**

| 설비명 | 대수 | 용량 | 제어 방식 | 비고 |
|--------|------|------|-----------|------|
| 터보 브로워 | 1 | 21.7 kW | 수동/자동 (단독/교번) | DO 제어 |
| 흡입펌프 (기존막) | 2 (A/B) | 0.6 kW | LOCAL/REMOTE | 과전류 대치 |
| 흡입펌프 (신규막) | 2 (C/D) | 1.7 kW | LOCAL/REMOTE | 과전류 대치 |
| 유량조정조 펌프 | 2 (A/B) | 5.5 kW | LOCAL/REMOTE | 가압부상조 연동 |
| 1차처리수 펌프 | 2 (A/B) | 1.5 kW | 수위 기반 자동 | HH 인터락 |
| 여과수조 펌프 | 2 (A/B) | 7.5 kW | 수위 기반 자동 | - |
| 반송펌프 | 2 (A/B) | 1.5 kW | 타이머 제어 | 가동/정지 시간 설정 |
| 방류펌프 | 2 (A/B) | 2.2 kW | 수위 기반 자동 | - |

**약품 투입 시스템:**
- PAC 펌프 (A/B): 1,020 cc/min, 유량조정조 펌프 연동
- NaOH 펌프 (A/B): 1,020 cc/min, pH 제어 (LOW-HIGH 구간)
- 폴리머 펌프 (A/B): 1,020 cc/min, 유량조정조 펌프 연동

**교반기:**
- 반응조: 120 RPM, 3.7 kW
- pH조정조: 180 RPM, 3.7 kW (NaOH 펌프 연동)
- 응집조: 60 RPM, 3.7 kW
- 약품 탱크 (PAC/NaOH/폴리머): 각 180 RPM, 2.25 kW

#### 10.5.2. 기존 제어 시스템 분석

**PLC 기반 자동 제어 특징:**

1. **수위 연동 제어 (Level-based Control)**
   - 분리막조 HI → 흡입펌프 ON (타이머 병행)
   - 분리막조 LOW → 흡입펌프 OFF
   - 분리막조 HHAL → 1차처리수 펌프 OFF (오버플로우 방지)

2. **시퀀스 제어 (Sequential Control)**
   - 유량조정조 펌프 ON → 가압부상조 시스템 자동 ON
     (SOL 밸브 → 순환펌프 → 약품펌프 → 교반기 순차 기동)
   - 정지 시 역순 진행

3. **타이머 제어 (Timer-based Control)**
   - 반송펌프: 가동 X분 / 정지 Y분 (설정 가능)
   - 흡입펌프: 최대 7분 가동 제한 (막 보호)
   - 터보 브로워: 교번 운전 시간 설정

4. **센서 피드백 제어 (Sensor Feedback)**
   - DO 센서: 터보 브로워 RPM 조절 (설정값 대비)
   - pH 센서: NaOH 펌프 ON/OFF (LOW-HIGH 구간)
   - 차압계: 역세 필요 시기 판단 (수동 확인)

5. **분리막 역세 자동화**
   - 주간세정: 주 1회, 설정 요일/시간 자동 실행
   - 인라인세정: 분기 1회 (3/6/9/12월), 자동 실행
   - 역세 시퀀스: 펌프 정지 → 약품 주입 → 정치 → 폭기 → 재가동

**현재 시스템의 장점:**
- 완전 자동화: LOCAL/REMOTE 전환으로 무인 운전 가능
- 안전장치: 다중 인터락으로 오버플로우/막 손상 방지
- 이중화: 주요 펌프 A/B 구성, 과전류 시 자동 대치
- 표준 통신: MODBUS 기반, TMS 연동 가능
- 역세 자동화: 운영자 개입 최소화

**현재 시스템의 한계 (AI 개선 필요 부분):**

| 제어 대상 | 현재 방식 | 한계점 | AI 개선 방안 |
|-----------|----------|--------|--------------|
| 터보 브로워 | DO 센서 기반 Feedback | 과포기 발생 (전력 낭비) | 유입 부하 예측 → 사전 RPM 조절 |
| 약품 투입 | 유량 비례 투입 | 유입 농도 변동 미대응 | COD/BOD 예측 → 약품량 최적화 |
| 반송펌프 | 고정 타이머 | MLSS 농도 변동 미고려 | MLSS 예측 → 동적 반송 스케줄 |
| 흡입펌프 | 7분 고정 타이머 | 유량 변동 미대응 | 유입량 예측 → 동적 타이머 |
| 역세 스케줄 | 주 1회 고정 | 과도/부족 역세 발생 | 차압 예측 → 조기/연기 역세 |

#### 10.5.3. AI 전환 시 기대 효과

**전력 절감 효과 (시뮬레이션):**

```
현재 전력 소비 (연간 추정):
- 터보 브로워: 21.7 kW × 24h × 365d × 0.7 (가동률) = 133,000 kWh
- 기타 펌프: 약 30 kW × 24h × 365d × 0.5 = 131,000 kWh
- 총 전력: 약 264,000 kWh/년
- 전력비: 약 26.4백만 원/년 (kWh당 100원 가정)

AI 적용 후 절감 (15% 목표):
- 터보 브로워 최적화: 133,000 × 0.2 = 26,600 kWh (20% 절감)
- 펌프 효율화: 131,000 × 0.1 = 13,100 kWh (10% 절감)
- 총 절감: 39,700 kWh/년 (15%)
- 절감액: 약 4.0백만 원/년
```

**약품비 절감:**
- 현재: PAC/NaOH/폴리머 유량 비례 투입
- AI 개선: 유입 농도 예측하여 약품량 정밀 제어
- 예상 절감: 10% (약 0.5백만 원/년, 중소 규모 기준)

**역세 최적화:**
- 현재: 주 1회 고정 (연간 52회 × 2계열 = 104회)
- AI 개선: 차압 예측하여 필요시만 역세
- 예상 절감: 약 30% (연간 32회 절감)
- 약품비 절감: 약 0.3백만 원/년

**총 절감 효과 (연간):**
- 전력비: 4.0백만 원
- 약품비: 0.5백만 원
- 역세 약품비: 0.3백만 원
- **합계: 4.8백만 원/년**

#### 10.5.4. 실증 계획

**Phase 1: 데이터 수집 (3개월)**
- 기존 PLC 로그 데이터 수집
- 추가 센서 설치 (COD, BOD, MLSS)
- 실험실 분석 병행 (주 2회)

**Phase 2: AI 모델 개발 (6개월)**
- 금강엔지니어링 데이터로 학습
- 시뮬레이션 검증
- PLC 연동 모듈 개발

**Phase 3: 파일럿 테스트 (3개월)**
- 모니터링 모드 (1개월)
- 반자동 모드 (1개월)
- 자동 모드 (1개월)

**Phase 4: 전면 적용 (ongoing)**
- 72시간 무인 운전 달성
- 성능 검증 및 최적화

---

## 11. 기대 효과 및 파급력

### 11.1. 기술적 측면

**국내 기술 수준 향상:**
- 현재: 사후 제어 중심 (TRL 5~6)
- 목표: 예측 제어 중심 (TRL 7~9)
- 선진국 대비: 현재 70% → 95% 수준 도달

**핵심 기술 확보:**
1. 하수처리 전용 AI 예측 모델
2. Feed-forward 제어 알고리즘
3. 센서 데이터 품질 관리 기술
4. 무인 자동운전 플랫폼

**특허 및 논문:**
- 특허 출원: 5건 이상 (AI 모델, 제어 로직, 센서 융합 등)
- SCI급 논문: 3편 이상
- 기술료 수입: 연간 100백만 원 목표 (10년간 10억 원)

### 11.2. 경제적 측면

**시장 규모:**
- 국내 하수처리 시장: 연간 2조 원
- AI 자동화 시장 (예상): 연간 500억 원 (2030년)
- 목표 점유율: 20% (연간 100억 원 매출)

**산업 생태계 조성:**
- AI 플랫폼 개발사
- 센서 제조사
- 시스템 통합(SI) 업체
- 유지보수 전문 업체
- 예상 고용 창출: 200명 (5년간)

**수출 가능성:**
- 1차 목표: 동남아시아 (베트남, 태국, 인도네시아)
- 2차 목표: 중동 (사우디, UAE)
- 예상 수출액: 연간 50억 원 (2030년)

### 11.3. 사회/환경적 측면

**환경 보전:**
- 방류수 수질 안정화 → 하천/호소 수질 개선
- 연간 CO₂ 감축: 17만 톤 (전국 확산 시)
- 탄소배출권 가치: 약 20억 원/년 (톤당 12,000원 기준)

**국민 삶의 질 향상:**
- 악취 민원 감소: 30% 이상 (안정적 운전)
- 물환경 개선: 친수 공간 확대
- 에너지 절약: 국가 전력 수급 안정화 기여

**공공 서비스 질 향상:**
- 24시간 무인 운전 → 인력 공백 해소
- 숙련 인력 부족 문제 해결
- 운영비 절감 → 지자체 재정 건전성 개선

### 11.4. 정책적 측면

**국가 정책 부합도:**

| 정책 | 연관성 | 기여도 |
|------|--------|--------|
| 탄소중립 2050 | 전력 절감, CO₂ 감축 | ★★★★★ |
| 디지털 뉴딜 | AI 기반 공공 인프라 | ★★★★★ |
| 스마트 물관리 | 수질 데이터 기반 관리 | ★★★★★ |
| 그린 뉴딜 | 친환경 에너지 절약 | ★★★★☆ |

**표준 및 제도화:**
- 하수처리 AI 자동화 가이드라인 제정 (환경부)
- 무인 운전 인증제도 신설 제안
- TMS 연동 표준 프로토콜 개정 참여

---

## 12. 연구 수행 체계

### 12.1. 연구팀 구성

| 역할 | 인원 | 주요 업무 | 자격 요건 |
|------|------|-----------|-----------|
| 연구책임자(PM) | 1 | 총괄 관리, 의사결정 | 환경공학 박사, 15년 이상 경력 |
| AI 모델 개발 | 2 | 딥러닝 모델 설계/학습 | AI/ML 석사 이상, Python 능숙 |
| 제어 알고리즘 | 1 | 제어 로직 설계/구현 | 제어공학 석사, SCADA 경험 |
| 공정 전문가 | 2 | 하수처리 공정 설계/분석 | 환경공학 석사, 처리장 운영 경험 |
| 데이터 엔지니어 | 1 | DB 구축, 전처리 파이프라인 | 빅데이터 학사, SQL/NoSQL |
| 시스템 통합 | 1 | SCADA 연동, UI/UX 개발 | 전기/전자 학사, 통신 프로토콜 |
| 현장 엔지니어 | 1 | 센서 설치, 유지보수 | 환경/전기 기사, 현장 경험 |
| 연구보조원 | 2 | 데이터 수집, 실험 분석 | 환경공학 학사 이상 |
| **총 인원** | **11명** |  |  |

### 12.2. 협력 기관

**산업체 협력:**
- 센서 제조사: 온라인 센서 공동 개발 (정확도 향상)
- SCADA 업체: 통합 플랫폼 연동 협력
- 처리장 운영사: 실증 테스트베드 제공

**학계 협력:**
- A대학교 AI연구소: 딥러닝 알고리즘 자문
- B대학교 환경공학과: 공정 시뮬레이션 협력

**연구기관 협력:**
- 국립환경과학원: 법규 자문, 성능 검증
- 한국환경공단: TMS 연동 표준화 협력

### 12.3. 성과 관리

**중간 평가 (18개월):**
- 데이터 수집 완료 여부
- AI 모델 예측 정확도 (목표: MAPE < 12%)
- 시뮬레이션 에너지 절감 효과

**최종 평가 (36개월):**
- 모든 KPI 달성 여부
- 현장 실증 성공 여부
- 특허 출원 및 논문 발표 실적

**성과 확산:**
- 기술 설명회 개최 (연 2회)
- 온라인 세미나 (유튜브 라이브)
- 기술 이전 박람회 참가

---

## 13. 결론 및 제안

### 13.1. 핵심 강점

1. **명확한 문제 해결**: 기존 사후 제어의 한계를 사전 예측 제어로 극복
2. **검증된 기술 조합**: LSTM 기반 시계열 예측 + Feed-forward 제어
3. **법규 준수 우선**: 수질 기준 준수를 최우선 목표로 설정
4. **경제성 확보**: 6년 이내 투자 회수, 대규모 처리장은 3년 가능
5. **확장성**: Transfer Learning으로 다양한 처리장 적용 가능

### 13.2. 혁신성

- **국내 최초**: 유입수 기반 Feed-forward 제어 하수처리 AI 시스템
- **세계적 수준**: 미국 EPA, 유럽 등에서도 연구 단계인 최신 기술
- **범용 플랫폼**: 처리장 규모/공정에 관계없이 적용 가능

### 13.3. 성공 가능성

**기술적 실현 가능성: 높음**
- AI 예측 모델: 다수의 선행 연구로 검증됨
- 센서 기술: 상용화된 제품 활용
- 제어 기술: 기존 SCADA 시스템 활용

**경제적 타당성: 높음**
- 명확한 절감 효과 (전력비, 인건비)
- 합리적인 투자 회수 기간 (6년)
- 시장 확대 가능성 (국내외)

**정책적 지원 가능성: 높음**
- 탄소중립, 디지털 뉴딜 등 국가 정책 부합
- 환경부, 과기부 등 다부처 관심 분야

### 13.4. 제안 사항

**정부 지원 요청:**
1. R&D 예산 지원: 총 22억 원 (3년)
2. 실증 처리장 선정 협조 (환경부, 지자체)
3. 규제 샌드박스 적용 (초기 실증 단계)
4. 성과 확산 지원 (기술 이전, 표준화)

**향후 발전 방향:**
- 4단계 (37~48개월): 전국 확산 및 상용화
- 5단계 (49~60개월): 해외 수출 및 글로벌 표준화
- 장기 비전: 국내 4,200개 처리장의 30% 적용 (2035년)

---

## 14. 참고문헌

1. 환경부 (2023), "전국 하수처리시설 운영관리 실태조사"
2. 한국환경공단 (2022), "하수처리장 에너지 자립화 가이드라인"
3. Mamandipoor et al. (2020), "Deep Learning for Wastewater Treatment: A Review", Water Research, Vol. 171
4. Newhart et al. (2019), "Data-Driven Performance Analysis of Wastewater Treatment Plants", Environmental Science & Technology
5. 국립환경과학원 (2023), "물환경보전법 해설서"
6. IEA (2022), "Energy Efficiency in Water and Wastewater Facilities"
7. EPA (2021), "Advanced Control Strategies for Nutrient Removal"

---

## 부록

### A. 용어 정의

- **Feed-forward Control**: 유입 변수 기반 사전 예측 제어
- **Feedback Control**: 출력 변수 기반 사후 대응 제어
- **LSTM**: Long Short-Term Memory, 장단기 메모리 순환신경망
- **MAPE**: Mean Absolute Percentage Error, 평균 절대 백분율 오차
- **TMS**: 수질원격감시체계 (Tele-Monitoring System)
- **SCADA**: Supervisory Control And Data Acquisition, 감시제어 데이터 수집 시스템
- **DO**: Dissolved Oxygen, 용존산소
- **MLSS**: Mixed Liquor Suspended Solids, 혼합액 부유물질
- **SRT**: Sludge Retention Time, 슬러지 체류시간
- **HRT**: Hydraulic Retention Time, 수리학적 체류시간

### B. 연구팀 연락처

- 연구책임자: [이름], [소속], [이메일], [전화번호]
- 과제 관리자: [이름], [소속], [이메일], [전화번호]

### C. 첨부 자료 목록

1. 대상 처리장 현황 조사서
2. 센서 사양서 및 견적서
3. AI 모델 아키텍처 상세 설계도
4. 시뮬레이션 결과 상세 데이터
5. 법규 검토 의견서
6. 연구팀 이력서
7. 금강엔지니어링 폐수처리시설 운영 매뉴얼

---

## 부록 B. 현장 설비 사양서 (금강엔지니어링 실제 시설 기준)

### B.1. 폐수처리 공정 개요

**공정 흐름도:**
```
[유입] → 유량조정조
    ↓
[화학처리]
반응조 (PAC 응집) → pH조정조 (NaOH 중화) → 응집조 (폴리머 응집)
    ↓
가압부상조 (DAF) → 스컴 제거
    ↓
1차 처리수조
    ↓
[생물처리]
폭기조 1~4 (호기성 산화) → 분리막조 (MBR 여과) → 여과수조
    ↓
[후처리]
A/C 필터 (활성탄 여과, 비상시) → 방류조 → 방류
    ↓
슬러지 처리: 탈수기 → 탈수 케이크, 여액 재순환
```

### B.2. 주요 설비 사양

#### **1. 펌프 설비**

| 펌프명 | 형식 | 사양 | 대수 | 제어 방식 | 비고 |
|--------|------|------|------|-----------|------|
| 흡입펌프 (기존막) | 원심 | 40A × 0.12㎥/min × 10mH × 0.6kW | 2 (A/B) | LOCAL/REMOTE, 수위+타이머 | 7분 제한 |
| 흡입펌프 (신규막) | 원심 | 50A × 0.2㎥/min × 10mH × 1.7kW | 2 (C/D) | LOCAL/REMOTE, 수위+타이머 | 7분 제한 |
| 유량조정조 펌프 | 원심 | 80A × 0.5㎥/min × 16mH × 5.5kW | 2 (A/B) | LOCAL/REMOTE, 수위 | 가압부상조 연동 |
| 1차처리수조 펌프 | 원심 | 50A × 0.2㎥/min × 10mH × 1.5kW | 2 (A/B) | REMOTE, 수위 (H) | HH 인터락 |
| 반송펌프 | 원심 | 50A × 0.2㎥/min × 10mH × 1.5kW | 2 (A/B) | REMOTE, 타이머 | 가동/정지 설정 |
| 여과수조 펌프 | 원심 | 80A × 0.2㎥/min × 30mH × 7.5kW | 2 (A/B) | REMOTE, 수위 (H) | 방류조 HH 연동 |
| 슬러지 이송펌프 | 원심 | 50A × 0.2㎥/min × 10mH × 1.5kW | 2 (A/B) | 탈수기 자동 | - |
| 여액 이송펌프 | 원심 | 50A × 0.1㎥/min × 10mH × 1.5kW | 1 (A) | REMOTE, 수위 (H) | - |
| 방류펌프 | 원심 | 80A × 0.2㎥/min × 13mH × 2.2kW | 2 (A/B) | REMOTE, 수위 (H) | - |

#### **2. 약품 투입 펌프**

| 약품명 | 형식 | 사양 | 대수 | 제어 방식 | 비고 |
|--------|------|------|------|-----------|------|
| PAC 펌프 | 다이어프램 | 1,020cc/min × 8㎏/㎠ × 0.2kW | 2 (A/B) | 유량조정조 펌프 연동 | - |
| NaOH 펌프 | 다이어프램 | 1,020cc/min × 8㎏/㎠ × 0.2kW | 2 (A/B) | pH 센서 (LOW-HIGH) | - |
| 폴리머 펌프 | 다이어프램 | 1,020cc/min × 8㎏/㎠ × 0.2kW | 2 (A/B) | 유량조정조 펌프 연동 | - |
| 세정약품 펌프 | 다이어프램 | 1,020㎖/min × 8㎏/㎠ × 0.2kW | 2 (A/B) | 역세 시간 (주간/인라인) | - |
| 역세펌프 | 마그네틱 | 25A × 0.03㎥/min × 7mH × 0.25kW | 1 | 역세 시간 | - |

#### **3. 송풍기 및 교반기**

| 설비명 | 형식 | 사양 | 대수 | 제어 방식 | 비고 |
|--------|------|------|------|-----------|------|
| 터보 브로워 | 터보식 | 22.0㎥/min × 4,000mmAq × 21.7kW | 1 (A/B) | 수동/자동 (DO 제어) | 단독/교번 운전 |
| 반응조 교반기 | 임펠러 | 120RPM × 3.7kW | 1 | 유량조정조 펌프 연동 | - |
| pH조정조 교반기 | 임펠러 | 180RPM × 3.7kW | 1 | NaOH 펌프 연동 | - |
| 응집조 교반기 | 임펠러 | 60RPM × 3.7kW | 1 | 유량조정조 펌프 연동 | - |
| PAC 탱크 교반기 | 임펠러 | 180RPM × 2.25kW | 1 | PAC 탱크 | - |
| NaOH 탱크 교반기 | 임펠러 | 180RPM × 2.25kW | 1 | NaOH 탱크 | - |
| 폴리머 탱크 교반기 | 임펠러 | 180RPM × 2.25kW | 1 | 폴리머 탱크 | - |
| 세정약품 탱크 교반기 | 임펠러 | 180RPM × 0.75kW | 1 | 역세 시간 | - |

#### **4. 가압부상조 시스템**

| 설비명 | 사양 | 대수 | 제어 방식 |
|--------|------|------|-----------|
| 공기압축기 | 0.22N㎥/min × 9.9㎏/㎠ × 1.5kW | 2 (A/B) | 압력계 자동 |
| 순환수 가압펌프 | 65A × 0.3㎥/min × 50mH × 5.09kW | 2 (A/B) | 유량조정조 펌프 연동 |

#### **5. 분리막 (MBR) 설비**

| 항목 | 사양 | 비고 |
|------|------|------|
| 분리막 타입 | 침지형 평막 (MBR) | - |
| 분리막 프레임 | 총 4개 (A계열 2개, B계열 2개) | 1회 역세 시 2개 처리 |
| 막 재질 | PVDF (Polyvinylidene Fluoride) | 추정 |
| 공칭 공극 | 0.1~0.4 μm | 추정 |
| 차압계 | 0~100 kPa | 실시간 모니터링 |
| 호이스트 | 2TON × 1.9kW | 계외세정 시 인양용 |

#### **6. 탈수기 시스템**

| 항목 | 사양 |
|------|------|
| 탈수기 타입 | DIBP-65W (벨트식) |
| 처리 용량 | 1.5~5.0㎥/hr |
| 제어 방식 | 탈수기 판넬 자동 |

### B.3. 센서 및 계측 설비

| 센서명 | 측정 범위 | 설치 위치 | 용도 | PLC 연동 |
|--------|-----------|-----------|------|----------|
| DO 센서 | 0~20 ppm | 분리막조 | 터보 브로워 제어 | ✓ |
| pH 센서 | 0~14 | pH조정조 | NaOH 펌프 제어 | ✓ |
| 레벨센서 (HHAL/HH/H/L/LL) | - | 각 조 | 펌프 자동 제어 | ✓ |
| 차압계 | 0~100 kPa | 분리막조 | 역세 시기 판단 | ✓ |
| 유량계 (방류) | 0~500㎥/h | 방류구 | 순시/일일/적산 유량 | ✓ (TMS 연동) |

### B.4. 제어 시스템

#### **PLC 사양**
- 제조사: [미기재]
- 통신 프로토콜: MODBUS TCP/IP (추정)
- 제어 모드: LOCAL / REMOTE (각 설비별)
- 화면: 터치 패널 (공정도, 운전상태, 경보, 수위/약품, 시간설정, 역세설정, 시스템)

#### **제어 기능**
1. 수위 기반 자동 제어 (Level Control)
2. 시퀀스 자동 제어 (Sequential Control)
3. 타이머 제어 (Timer Control)
4. 센서 피드백 제어 (DO, pH)
5. 인터락 제어 (Interlock)
6. 과전류 보호 및 이중화 운전 (A/B Auto-switch)
7. 역세 자동 스케줄링 (주간/인라인)
8. 경보 시스템 (HHAL, LLAL, FAULT)

### B.5. 역세정 시스템

#### **주간세정 (Weekly Cleaning)**
- 주기: 주 1회 (A계열: 토요일 9시, B계열: 일요일 9시)
- 약품: 차아염소산나트륨(NaOCl) 12%
- 투입량: 2.5L (희석탱크 30초당 0.5L × 2분 → 희석농도 0.03%)
- 세정시간: 20분 × 2계열 = 40분
- 시퀀스: 펌프 정지 → 밸브 닫힘 → 급수 → 약품 투입 → 희석 → 교반 → 분리막 주입 → 흡입펌프 재가동

#### **인라인세정 (In-line Cleaning)**
- 주기: 분기 1회 (A계열: 20주차 토요일 9시, B계열: 20주차 일요일 9시)
- 약품: 차아염소산나트륨(NaOCl) 12%
- 투입량: 25L (희석탱크 30초당 0.5L × 25분 → 희석농도 0.3%)
- 세정시간:
  - 약품 주입: 40분
  - 정치 (Soaking): 120분
  - 공폭기: 30분 (터보 브로워 가동)
  - 총 380분
- 시퀀스: 주간세정과 동일 + 정치 시간 + 공폭기

### B.6. 전력 소비 분석 (추정)

| 설비 | 용량 (kW) | 가동률 (%) | 연간 전력 (kWh) | 비중 (%) |
|------|-----------|------------|-----------------|----------|
| 터보 브로워 | 21.7 | 70 | 133,000 | 50.4 |
| 여과수조 펌프 | 7.5 | 50 | 32,850 | 12.4 |
| 유량조정조 펌프 | 5.5 | 40 | 19,272 | 7.3 |
| 순환수 가압펌프 | 5.09 | 40 | 17,835 | 6.8 |
| 반응조 교반기 | 3.7 | 40 | 12,996 | 4.9 |
| pH조정조 교반기 | 3.7 | 40 | 12,996 | 4.9 |
| 응집조 교반기 | 3.7 | 40 | 12,996 | 4.9 |
| 기타 펌프 및 교반기 | ~10 | 30-50 | ~22,000 | 8.4 |
| **합계** | **~60** | - | **~264,000** | **100** |

**AI 최적화 대상 (전력비 중요도):**
1. 터보 브로워 (50.4%) - **최우선**
2. 여과수조 펌프 (12.4%)
3. 유량조정조 펌프 (7.3%)
4. 순환수 가압펌프 (6.8%)

### B.7. 약품 소비량 (추정)

| 약품명 | 투입 농도 | 연간 사용량 | 비용 (백만원/년) |
|--------|-----------|-------------|------------------|
| PAC (10%) | 유량 비례 | ~5톤 | ~2.0 |
| NaOH (30%) | pH 제어 | ~3톤 | ~1.5 |
| 폴리머 (0.1%) | 유량 비례 | ~1톤 | ~1.0 |
| 차아염소산 (12%) | 역세용 | ~0.5톤 | ~0.5 |
| **합계** | - | - | **~5.0** |

---

**문서 정보**
- 작성일: 2025년 1월
- 버전: 2.0 (개선판)
- 분류: 대외비
- 승인:

---

*본 연구개발 기획서는 AI 기반 하수처리 무인 자동화 시스템 개발의 타당성, 기술적 실현 가능성, 경제성을 종합적으로 검토하여 작성되었습니다.*
