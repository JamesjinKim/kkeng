# EC-MBR AI 무인 자동화 시스템

**AI 기반 폐수처리 무인 자동운전 플랫폼**

유입수 성상을 AI로 예측하고, PSO 최적화를 통해 에너지/약품 비용을 최소화하면서 수질 기준을 100% 준수하는 **Feed-forward 제어 시스템**

---

## 핵심 기술

| 기술 | 역할 | 성능 목표 |
|------|------|----------|
| **Bi-LSTM + Attention** | 6시간 선행 수질 예측 | MAPE < 10% |
| **PSO 최적화** | 비용 최소화 제어 파라미터 탐색 | 전력비 15% 절감 |
| **Feed-forward 제어** | 유입 기반 사전 대응 (vs 사후 Feedback) | 수질 위반 0회/년 |
| **Edge AI (Hailo NPU)** | 현장 실시간 추론 | 추론 1~2초 |

---

## 3-Tier 하이브리드 아키텍처

```
┌─────────────────────────────────────────────────────────────────────┐
│                       3-Tier 하이브리드 아키텍처                       │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Tier 1: Edge (데이터 수집)                          비용: ~$150     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │ • Raspberry Pi 5 (4GB) - 센서 데이터 1분 주기 수집              │ │
│  │ • QA/QC 전처리, 24시간 로컬 버퍼                                │ │
│  │ • [Fallback] 네트워크 단절 시 Rule-based로 Tier 3 직접 제어      │ │
│  └──────────────────────────┬────────────────────────────────────┘ │
│                             │ MQTT                                  │
│                             ▼                                       │
│  Tier 2: Gateway (AI 추론 + 데이터 관리)              비용: ~$300     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │ • Mini PC + Hailo-8L NPU (13 TOPS)                             │ │
│  │ • InfluxDB (장기 데이터), Grafana Dashboard                     │ │
│  │ • Bi-LSTM 예측 (5분), PSO 최적화 (30분), Safety Layer           │ │
│  └──────────────────────────┬────────────────────────────────────┘ │
│                             │ Serial/GPIO                           │
│                             ▼                                       │
│  Tier 3: Control (액추에이터 제어)                    비용: ~$100     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │ • ESP32 + 솔리드스테이트 릴레이 + Safety PLC (핵심 인터락)       │ │
│  │ • 운전 모드: 무인자동 / 반자동 / 수동                           │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  총 비용: ~$550/현장                                                 │
└─────────────────────────────────────────────────────────────────────┘
```

### Tier별 역할

| Tier | 하드웨어 | 주요 역할 | AI 역할 |
|------|---------|----------|--------|
| **Tier 1** | RPi 5 (4GB) | 센서 수집, QA/QC, 로컬 캐시 | Fallback Rule만 |
| **Tier 2** | Mini PC + Hailo-8L | DB, AI 추론, PSO, Dashboard | **AI 추론 담당** |
| **Tier 3** | ESP32 + 릴레이 + PLC | 액추에이터 직접 제어 | 없음 |

### 운전 모드

| 모드 | 설명 | AI 역할 |
|------|------|---------|
| **무인자동** | AI Feed-forward 제어, PSO 최적값 자동 적용 | 전적 제어 |
| **반자동** | AI 권장 후 운영자 승인 시 실행 | 권장 제공 |
| **수동** | 운영자 직접 제어 | 모니터링만 |

---

## 대상 시설

- **금강엔지니어링 MBR 폐수처리시설**
- 처리 용량: 200~500 m³/일
- 기존 PLC: LS / Mitsubishi (Modbus TCP)

---

## 문서 구조

| 문서 | 목적 | 대상 독자 |
|------|------|----------|
| [PRD.md](PRD.md) | 소프트웨어 요구사항 + 디렉토리 구조 | 개발자 |
| [TechArc.md](TechArc.md) | 상세 기술 아키텍처 (4-Layer, Feed-forward 구현) | 기술 검토자 |
| [project.md](project.md) | R&D 제안서 (예산, 일정, KPI) | 투자자, 정부기관 |
| [operation_table.md](operation_table.md) | PLC 제어 시퀀스 및 인터락 | 현장 엔지니어 |
| [AI적용방법.md](AI적용방법.md) | AI 적용 방법론 | 개발자 |

### 참조 문서

| 목적 | 참조 |
|------|------|
| 시스템 전체 아키텍처 이해 | `TechArc.md` |
| 소프트웨어 요구사항 확인 | `PRD.md` |
| PLC 제어 시퀀스 확인 | `operation_table.md` |
| R&D 제안서 전체 | `project.md` |
| 장비 사양 및 기능 | `각조및 장비의 기능표.md` |

---

## 핵심 성과 지표 (KPI)

| 지표 | 목표치 |
|------|--------|
| 방류수질 기준 초과 | **0회/년** |
| 에너지 절감률 | **15% 이상** |
| 예측 정확도 (MAPE) | **10% 이하** |
| 무인 운전 시간 | **72시간 이상** |
| 투자 회수 기간 | **45일 이내** |

---

## 기술 용어

| 용어 | 설명 |
|------|------|
| **EC-MBR** | Electrocoagulation + MBR (전기응집 결합형 MBR) |
| **Feed-forward** | 유입수 기반 사전 제어 (예측 기반) |
| **Feedback** | 방류수 기반 사후 제어 (반응 기반) |
| **TMP** | Trans-Membrane Pressure (막간압력차) |
| **DO** | Dissolved Oxygen (용존산소) |
| **MAPE** | Mean Absolute Percentage Error |
| **HEF** | Hailo Executable Format (NPU 모델 포맷) |

---

## 라이선스

본 프로젝트는 연구개발 기획 문서 저장소입니다.
